// Copyright 2024 The Lynx Authors. All rights reserved.
// Licensed under the Apache License Version 2.0 that can be found in the
// LICENSE file in the root directory of this source tree.
import { BackgroundSnapshotInstance } from './backgroundSnapshot.js';
import { SnapshotInstance } from './snapshot.js';
const document = {};
/**
 * Sets up the document interface for the background thread.
 * All DOM operations are intercepted to create {@link BackgroundSnapshotInstance}.
 */
function setupBackgroundDocument() {
    document.createElement = function (type) {
        return new BackgroundSnapshotInstance(type);
    };
    document.createElementNS = function (_ns, type) {
        return new BackgroundSnapshotInstance(type);
    };
    document.createTextNode = function (text) {
        const i = new BackgroundSnapshotInstance(null);
        i.setAttribute(0, text);
        Object.defineProperty(i, 'data', {
            set(v) {
                i.setAttribute(0, v);
            },
        });
        return i;
    };
}
/**
 * Sets up the document interface for the main thread.
 * All DOM operations are intercepted to create {@link SnapshotInstance}.
 */
function setupDocument() {
    document.createElement = function (type) {
        return new SnapshotInstance(type);
    };
    document.createElementNS = function (_ns, type) {
        return new SnapshotInstance(type);
    };
    document.createTextNode = function (text) {
        const i = new SnapshotInstance(null);
        i.setAttribute(0, text);
        Object.defineProperty(i, 'data', {
            set(v) {
                i.setAttribute(0, v);
            },
        });
        return i;
    };
}
// if (__JS__) {
//   setupBackgroundDocument();
// } else if (__LEPUS__) {
//   setupDocument();
// }
export { document, setupBackgroundDocument, setupDocument };
//# sourceMappingURL=document.js.map