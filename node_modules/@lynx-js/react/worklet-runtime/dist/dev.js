(()=>{
    "use strict";
    function _define_property(obj, key, value) {
        if (key in obj) Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
        else obj[key] = value;
        return obj;
    }
    class Animation {
        cancel() {
            return __ElementAnimate(this.effect.target.element, [
                3,
                this.id
            ]);
        }
        pause() {
            return __ElementAnimate(this.effect.target.element, [
                2,
                this.id
            ]);
        }
        play() {
            return __ElementAnimate(this.effect.target.element, [
                1,
                this.id
            ]);
        }
        start() {
            return __ElementAnimate(this.effect.target.element, [
                0,
                this.id,
                this.effect.keyframes,
                this.effect.options
            ]);
        }
        constructor(effect){
            _define_property(this, "effect", void 0);
            _define_property(this, "id", void 0);
            this.effect = effect;
            this.id = '__lynx-inner-js-animation-' + Animation.count++;
            this.start();
        }
    }
    _define_property(Animation, "count", 0);
    function effect_define_property(obj, key, value) {
        if (key in obj) Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
        else obj[key] = value;
        return obj;
    }
    class KeyframeEffect {
        constructor(target, keyframes, options){
            effect_define_property(this, "target", void 0);
            effect_define_property(this, "keyframes", void 0);
            effect_define_property(this, "options", void 0);
            this.target = target;
            this.keyframes = keyframes;
            this.options = options;
        }
    }
    function element_define_property(obj, key, value) {
        if (key in obj) Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
        else obj[key] = value;
        return obj;
    }
    let willFlush = false;
    let shouldFlush = true;
    function setShouldFlush(value) {
        shouldFlush = value;
    }
    class Element {
        setAttribute(name, value) {
            __SetAttribute(this.element, name, value);
            this.flushElementTree();
        }
        setStyleProperty(name, value) {
            __AddInlineStyle(this.element, name, value);
            this.flushElementTree();
        }
        setStyleProperties(styles) {
            for(const key in styles)__AddInlineStyle(this.element, key, styles[key]);
            this.flushElementTree();
        }
        getAttribute(attributeName) {
            return __GetAttributeByName(this.element, attributeName);
        }
        getAttributeNames() {
            return __GetAttributeNames(this.element);
        }
        querySelector(selector) {
            const ref = __QuerySelector(this.element, selector, {});
            return ref ? new Element(ref) : null;
        }
        querySelectorAll(selector) {
            return __QuerySelectorAll(this.element, selector, {}).map((element)=>new Element(element));
        }
        animate(keyframes, options) {
            const normalizedOptions = 'number' == typeof options ? {
                duration: options
            } : null != options ? options : {};
            return new Animation(new KeyframeEffect(this, keyframes, normalizedOptions));
        }
        invoke(methodName, params) {
            return new Promise((resolve, reject)=>{
                __InvokeUIMethod(this.element, methodName, null != params ? params : {}, (res)=>{
                    if (0 === res.code) resolve(res.data);
                    else reject(new Error('UI method invoke: ' + JSON.stringify(res)));
                });
                this.flushElementTree();
            });
        }
        flushElementTree() {
            if (willFlush || !shouldFlush) return;
            willFlush = true;
            Promise.resolve().then(()=>{
                willFlush = false;
                __FlushElementTree();
            });
        }
        constructor(element){
            element_define_property(this, "element", void 0);
            Object.defineProperty(this, 'element', {
                get () {
                    return element;
                }
            });
        }
    }
    function lepusQuerySelector_define_property(obj, key, value) {
        if (key in obj) Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
        else obj[key] = value;
        return obj;
    }
    class PageElement {
        static get() {
            var _PageElement;
            null != (_PageElement = PageElement).pageElement || (_PageElement.pageElement = __GetPageElement());
            return PageElement.pageElement;
        }
    }
    lepusQuerySelector_define_property(PageElement, "pageElement", void 0);
    function querySelector(cssSelector) {
        const element = __QuerySelector(PageElement.get(), cssSelector, {});
        return element ? new Element(element) : null;
    }
    function querySelectorAll(cssSelector) {
        return __QuerySelectorAll(PageElement.get(), cssSelector, {}).map((element)=>new Element(element));
    }
    function isSdkVersionGt(major, minor) {
        var _SystemInfo_lynxSdkVersion;
        const lynxSdkVersion = null != (_SystemInfo_lynxSdkVersion = SystemInfo.lynxSdkVersion) ? _SystemInfo_lynxSdkVersion : '1.0';
        const version = lynxSdkVersion.split('.');
        return Number(version[0]) > major || Number(version[0]) == major && Number(version[1]) > minor;
    }
    function initApiEnv() {
        lynx.querySelector = querySelector;
        lynx.querySelectorAll = querySelectorAll;
        globalThis.setTimeout = lynx.setTimeout;
        globalThis.setInterval = lynx.setInterval;
        globalThis.clearTimeout = lynx.clearTimeout;
        var _lynx_clearInterval;
        globalThis.clearInterval = null != (_lynx_clearInterval = lynx.clearInterval) ? _lynx_clearInterval : lynx.clearTimeInterval;
        {
            const requestAnimationFrame = lynx.requestAnimationFrame;
            lynx.requestAnimationFrame = globalThis.requestAnimationFrame = (callback)=>{
                if (!isSdkVersionGt(2, 15)) throw new Error("requestAnimationFrame in main thread script requires Lynx sdk version 2.16");
                return requestAnimationFrame(callback);
            };
        }
        globalThis.cancelAnimationFrame = lynx.cancelAnimationFrame;
    }
    function profile(sliceName, f) {
        console.profile(sliceName);
        try {
            return f();
        } finally{
            console.profileEnd();
        }
    }
    let impl;
    function initWorkletRef() {
        return impl = {
            _workletRefMap: {},
            _firstScreenWorkletRefMap: {},
            updateWorkletRef,
            updateWorkletRefInitValueChanges,
            clearFirstScreenWorkletRefMap
        };
    }
    const createWorkletRef = (id, value)=>({
            current: value,
            _wvid: id
        });
    const getFromWorkletRefMap = (refImpl)=>{
        const id = refImpl._wvid;
        let value;
        if (id < 0) {
            value = impl._firstScreenWorkletRefMap[id];
            if (!value) value = impl._firstScreenWorkletRefMap[id] = createWorkletRef(id, refImpl._initValue);
        } else value = impl._workletRefMap[id];
        if (void 0 === value) throw new Error('Worklet: ref is not initialized: ' + id);
        return value;
    };
    function removeValueFromWorkletRefMap(id) {
        delete impl._workletRefMap[id];
    }
    function updateWorkletRef(handle, element) {
        getFromWorkletRefMap(handle).current = element ? new Element(element) : null;
    }
    function updateWorkletRefInitValueChanges(patch) {
        profile('updateWorkletRefInitValueChanges', ()=>{
            patch.forEach(([id, value])=>{
                if (!impl._workletRefMap[id]) impl._workletRefMap[id] = createWorkletRef(id, value);
            });
        });
    }
    function clearFirstScreenWorkletRefMap() {
        impl._firstScreenWorkletRefMap = {};
    }
    function initEventListeners() {
        const jsContext = lynx.getJSContext();
        jsContext.addEventListener("Lynx.Worklet.runWorkletCtx", (event)=>{
            const data = JSON.parse(event.data);
            const returnValue = runWorklet(data.worklet, data.params);
            jsContext.dispatchEvent({
                type: "Lynx.Worklet.FunctionCallRet",
                data: JSON.stringify({
                    resolveId: data.resolveId,
                    returnValue
                })
            });
        });
        jsContext.addEventListener("Lynx.Worklet.releaseWorkletRef", (event)=>{
            removeValueFromWorkletRefMap(event.data.id);
        });
    }
    let delayRunOnBackground_impl;
    function initRunOnBackgroundDelay() {
        return delayRunOnBackground_impl = {
            delayedBackgroundFunctionArray: [],
            delayRunOnBackground,
            runDelayedBackgroundFunctions
        };
    }
    function delayRunOnBackground(fnObj, task) {
        var _fnObj;
        delayRunOnBackground_impl.delayedBackgroundFunctionArray.push({
            task
        });
        var __delayIndices;
        const delayIndices = null != (__delayIndices = (_fnObj = fnObj)._delayIndices) ? __delayIndices : _fnObj._delayIndices = [];
        delayIndices.push(delayRunOnBackground_impl.delayedBackgroundFunctionArray.length - 1);
    }
    function runDelayedBackgroundFunctions() {
        for (const details of delayRunOnBackground_impl.delayedBackgroundFunctionArray)if (details.jsFnHandle) details.task(details.jsFnHandle._jsFnId, details.jsFnHandle._execId);
        delayRunOnBackground_impl.delayedBackgroundFunctionArray.length = 0;
    }
    let delayWorkletEvent_impl;
    function initEventDelay() {
        return delayWorkletEvent_impl = {
            _delayedWorkletParamsMap: new Map(),
            runDelayedWorklet,
            clearDelayedWorklets
        };
    }
    function delayExecUntilJsReady(hash, params) {
        profile('delayExecUntilJsReady: ' + hash, ()=>{
            const map = delayWorkletEvent_impl._delayedWorkletParamsMap;
            const paramVec = map.get(hash);
            if (paramVec) paramVec.push(params);
            else map.set(hash, [
                params
            ]);
        });
    }
    function runDelayedWorklet(worklet, element) {
        profile('commitDelayedWorklet', ()=>{
            const paramsVec = delayWorkletEvent_impl._delayedWorkletParamsMap.get(worklet._wkltId);
            if (void 0 === paramsVec) return;
            const leftParamsVec = [];
            paramsVec.forEach((params)=>{
                var _firstParam_currentTarget;
                const firstParam = params[0];
                if ((null == firstParam ? void 0 : null == (_firstParam_currentTarget = firstParam.currentTarget) ? void 0 : _firstParam_currentTarget.elementRefptr) === element) setTimeout(()=>{
                    profile('runDelayedWorklet', ()=>{
                        runWorklet(worklet, params);
                    });
                }, 0);
                else leftParamsVec.push(params);
            });
            delayWorkletEvent_impl._delayedWorkletParamsMap.set(worklet._wkltId, leftParamsVec);
        });
    }
    function clearDelayedWorklets() {
        delayWorkletEvent_impl._delayedWorkletParamsMap.clear();
    }
    function initEomImpl() {
        return {
            setShouldFlush: setShouldFlush
        };
    }
    function hydrateCtx(ctx, firstScreenCtx) {
        profile('hydrateCtx', ()=>{
            hydrateCtxImpl(ctx, firstScreenCtx, ctx._execId);
        });
    }
    function hydrateCtxImpl(ctx, firstScreenCtx, execId) {
        if (!ctx || 'object' != typeof ctx || !firstScreenCtx || 'object' != typeof firstScreenCtx) return;
        const ctxObj = ctx;
        const firstScreenCtxObj = firstScreenCtx;
        if (ctxObj['_wkltId'] && ctxObj['_wkltId'] !== firstScreenCtxObj['_wkltId']) return;
        for(const key in ctx)if ('_wvid' === key) hydrateMainThreadRef(ctxObj[key], firstScreenCtxObj);
        else if ('_jsFn' === key) hydrateDelayRunOnBackgroundTasks(ctxObj[key], firstScreenCtxObj[key], execId);
        else {
            const firstScreenValue = 'function' == typeof firstScreenCtxObj[key] ? firstScreenCtxObj[key].ctx : firstScreenCtxObj[key];
            hydrateCtxImpl(ctxObj[key], firstScreenValue, execId);
        }
    }
    function hydrateMainThreadRef(refId, value) {
        if ('_initValue' in value) return;
        const ref = lynxWorkletImpl._refImpl._workletRefMap[refId];
        ref.current = value.current;
    }
    function hydrateDelayRunOnBackgroundTasks(fnObjs, firstScreenFnObjs, execId) {
        for(const fnName in fnObjs){
            const fnObj = fnObjs[fnName];
            const firstScreenFnObj = firstScreenFnObjs[fnName];
            if (null == firstScreenFnObj ? void 0 : firstScreenFnObj._delayIndices) for (const index of firstScreenFnObj._delayIndices){
                const details = lynxWorkletImpl._runOnBackgroundDelayImpl.delayedBackgroundFunctionArray[index];
                fnObj._execId = execId;
                details.jsFnHandle = fnObj;
            }
        }
    }
    function jsFunctionLifecycle_define_property(obj, key, value) {
        if (key in obj) Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
        else obj[key] = value;
        return obj;
    }
    class JsFunctionLifecycleManager {
        addRef(execId, objToRef) {
            var _this_execIdRefCount_get;
            this.execIdRefCount.set(execId, (null != (_this_execIdRefCount_get = this.execIdRefCount.get(execId)) ? _this_execIdRefCount_get : 0) + 1);
            this.registry.register(objToRef, execId);
        }
        removeRef(execId) {
            const rc = this.execIdRefCount.get(execId);
            if (rc > 1) return void this.execIdRefCount.set(execId, rc - 1);
            this.execIdRefCount.delete(execId);
            this.execIdSetToFire.add(execId);
            if (!this.willFire) {
                this.willFire = true;
                Promise.resolve().then(()=>{
                    this.fire();
                });
            }
        }
        fire() {
            profile('JsFunctionLifecycleManager.fire', ()=>{
                lynx.getJSContext().dispatchEvent({
                    type: "Lynx.Worklet.releaseBackgroundWorkletCtx",
                    data: Array.from(this.execIdSetToFire)
                });
                this.execIdSetToFire.clear();
                this.willFire = false;
            });
        }
        constructor(){
            jsFunctionLifecycle_define_property(this, "execIdRefCount", new Map());
            jsFunctionLifecycle_define_property(this, "execIdSetToFire", new Set());
            jsFunctionLifecycle_define_property(this, "willFire", false);
            jsFunctionLifecycle_define_property(this, "registry", void 0);
            this.registry = new FinalizationRegistry(this.removeRef.bind(this));
        }
    }
    function isRunOnBackgroundEnabled() {
        return isSdkVersionGt(2, 15);
    }
    function initWorklet() {
        globalThis.lynxWorkletImpl = {
            _workletMap: {},
            _refImpl: initWorkletRef(),
            _runOnBackgroundDelayImpl: initRunOnBackgroundDelay(),
            _hydrateCtx: hydrateCtx,
            _eventDelayImpl: initEventDelay(),
            _eomImpl: initEomImpl()
        };
        if (isRunOnBackgroundEnabled()) globalThis.lynxWorkletImpl._jsFunctionLifecycleManager = new JsFunctionLifecycleManager();
        globalThis.registerWorklet = registerWorklet;
        globalThis.registerWorkletInternal = registerWorklet;
        globalThis.runWorklet = workletRuntime_runWorklet;
    }
    function registerWorklet(_type, id, worklet) {
        lynxWorkletImpl._workletMap[id] = worklet;
    }
    function workletRuntime_runWorklet(ctx, params) {
        if (!validateWorklet(ctx)) return void console.warn('Worklet: Invalid worklet object: ' + JSON.stringify(ctx));
        if ('_lepusWorkletHash' in ctx) return void delayExecUntilJsReady(ctx._lepusWorkletHash, params);
        return runWorkletImpl(ctx, params);
    }
    function runWorkletImpl(ctx, params) {
        const worklet = profile('transformWorkletCtx ' + ctx._wkltId, ()=>transformWorklet(ctx, true));
        const params_ = profile('transformWorkletParams', ()=>transformWorklet(params || [], false));
        return profile('runWorklet', ()=>worklet(...params_));
    }
    function validateWorklet(ctx) {
        return 'object' == typeof ctx && null !== ctx && ('_wkltId' in ctx || '_lepusWorkletHash' in ctx);
    }
    const workletCache = new WeakMap();
    function transformWorklet(ctx, isWorklet) {
        if ('object' != typeof ctx || null === ctx) return ctx;
        if (isWorklet) {
            const res = workletCache.get(ctx);
            if (res) return res;
        }
        const worklet = {
            main: ctx
        };
        transformWorkletInner(worklet, 0, ctx);
        if (isWorklet) workletCache.set(ctx, worklet.main);
        return worklet.main;
    }
    const transformWorkletInner = (value, depth, ctx)=>{
        const limit = 1000;
        if (++depth >= limit) throw new Error('Depth of value exceeds limit of ' + limit + '.');
        if ('object' != typeof value || null === value) return;
        const obj = value;
        for(const key in obj){
            const subObj = obj[key];
            if ('object' != typeof subObj || null === subObj) continue;
            if ('elementRefptr' in subObj) {
                obj[key] = new Element(subObj['elementRefptr']);
                continue;
            }
            if (subObj instanceof Element) continue;
            transformWorkletInner(subObj, depth, ctx);
            const isWorkletRef = '_wvid' in subObj;
            if (isWorkletRef) {
                obj[key] = getFromWorkletRefMap(subObj);
                continue;
            }
            const isWorklet = '_wkltId' in subObj;
            if (isWorklet) {
                obj[key] = lynxWorkletImpl._workletMap[subObj._wkltId].bind({
                    ...subObj
                });
                obj[key].ctx = subObj;
                continue;
            }
            const isJsFn = '_jsFnId' in subObj;
            if (isJsFn) {
                var _lynxWorkletImpl__jsFunctionLifecycleManager;
                subObj['_execId'] = ctx._execId;
                null == (_lynxWorkletImpl__jsFunctionLifecycleManager = lynxWorkletImpl._jsFunctionLifecycleManager) || _lynxWorkletImpl__jsFunctionLifecycleManager.addRef(ctx._execId, subObj);
                continue;
            }
        }
    };
    if (void 0 === globalThis.lynxWorkletImpl) {
        initWorklet();
        initApiEnv();
        initEventListeners();
    }
})();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGV2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGx5bngtanMvcmVhY3Qtd29ya2xldC1ydW50aW1lLy4vc3JjL2FwaS9hbmltYXRpb24vYW5pbWF0aW9uLnRzIiwid2VicGFjazovL0BseW54LWpzL3JlYWN0LXdvcmtsZXQtcnVudGltZS8uL3NyYy9hcGkvYW5pbWF0aW9uL2VmZmVjdC50cyIsIndlYnBhY2s6Ly9AbHlueC1qcy9yZWFjdC13b3JrbGV0LXJ1bnRpbWUvLi9zcmMvYXBpL2VsZW1lbnQudHMiLCJ3ZWJwYWNrOi8vQGx5bngtanMvcmVhY3Qtd29ya2xldC1ydW50aW1lLy4vc3JjL2FwaS9sZXB1c1F1ZXJ5U2VsZWN0b3IudHMiLCJ3ZWJwYWNrOi8vQGx5bngtanMvcmVhY3Qtd29ya2xldC1ydW50aW1lLy4vc3JjL3V0aWxzL3ZlcnNpb24udHMiLCJ3ZWJwYWNrOi8vQGx5bngtanMvcmVhY3Qtd29ya2xldC1ydW50aW1lLy4vc3JjL2FwaS9seW54QXBpLnRzIiwid2VicGFjazovL0BseW54LWpzL3JlYWN0LXdvcmtsZXQtcnVudGltZS8uL3NyYy91dGlscy9wcm9maWxlLnRzIiwid2VicGFjazovL0BseW54LWpzL3JlYWN0LXdvcmtsZXQtcnVudGltZS8uL3NyYy93b3JrbGV0UmVmLnRzIiwid2VicGFjazovL0BseW54LWpzL3JlYWN0LXdvcmtsZXQtcnVudGltZS8uL3NyYy9saXN0ZW5lcnMudHMiLCJ3ZWJwYWNrOi8vQGx5bngtanMvcmVhY3Qtd29ya2xldC1ydW50aW1lLy4vc3JjL2RlbGF5UnVuT25CYWNrZ3JvdW5kLnRzIiwid2VicGFjazovL0BseW54LWpzL3JlYWN0LXdvcmtsZXQtcnVudGltZS8uL3NyYy9kZWxheVdvcmtsZXRFdmVudC50cyIsIndlYnBhY2s6Ly9AbHlueC1qcy9yZWFjdC13b3JrbGV0LXJ1bnRpbWUvLi9zcmMvZW9tSW1wbC50cyIsIndlYnBhY2s6Ly9AbHlueC1qcy9yZWFjdC13b3JrbGV0LXJ1bnRpbWUvLi9zcmMvaHlkcmF0ZS50cyIsIndlYnBhY2s6Ly9AbHlueC1qcy9yZWFjdC13b3JrbGV0LXJ1bnRpbWUvLi9zcmMvanNGdW5jdGlvbkxpZmVjeWNsZS50cyIsIndlYnBhY2s6Ly9AbHlueC1qcy9yZWFjdC13b3JrbGV0LXJ1bnRpbWUvLi9zcmMvd29ya2xldFJ1bnRpbWUudHMiLCJ3ZWJwYWNrOi8vQGx5bngtanMvcmVhY3Qtd29ya2xldC1ydW50aW1lLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDI1IFRoZSBMeW54IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlXG4vLyBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG5pbXBvcnQgdHlwZSB7IEtleWZyYW1lRWZmZWN0IH0gZnJvbSAnLi9lZmZlY3QuanMnO1xuXG5leHBvcnQgZW51bSBBbmltYXRpb25PcGVyYXRpb24ge1xuICBTVEFSVCA9IDAsIC8vIFN0YXJ0IGEgbmV3IGFuaW1hdGlvblxuICBQTEFZID0gMSwgLy8gUGxheS9yZXN1bWUgYSBwYXVzZWQgYW5pbWF0aW9uXG4gIFBBVVNFID0gMiwgLy8gUGF1c2UgYW4gZXhpc3RpbmcgYW5pbWF0aW9uXG4gIENBTkNFTCA9IDMsIC8vIENhbmNlbCBhbiBhbmltYXRpb25cbn1cblxuZXhwb3J0IGNsYXNzIEFuaW1hdGlvbiB7XG4gIHN0YXRpYyBjb3VudCA9IDA7XG4gIHB1YmxpYyByZWFkb25seSBlZmZlY3Q6IEtleWZyYW1lRWZmZWN0O1xuICBwdWJsaWMgcmVhZG9ubHkgaWQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihlZmZlY3Q6IEtleWZyYW1lRWZmZWN0KSB7XG4gICAgdGhpcy5lZmZlY3QgPSBlZmZlY3Q7XG4gICAgdGhpcy5pZCA9ICdfX2x5bngtaW5uZXItanMtYW5pbWF0aW9uLScgKyBBbmltYXRpb24uY291bnQrKztcbiAgICB0aGlzLnN0YXJ0KCk7XG4gIH1cblxuICBwdWJsaWMgY2FuY2VsKCk6IHZvaWQge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYWNjZXNzaW5nIHByaXZhdGUgbWVtYmVyICdlbGVtZW50J1xuICAgIHJldHVybiBfX0VsZW1lbnRBbmltYXRlKHRoaXMuZWZmZWN0LnRhcmdldC5lbGVtZW50LCBbQW5pbWF0aW9uT3BlcmF0aW9uLkNBTkNFTCwgdGhpcy5pZF0pO1xuICB9XG5cbiAgcHVibGljIHBhdXNlKCk6IHZvaWQge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYWNjZXNzaW5nIHByaXZhdGUgbWVtYmVyICdlbGVtZW50J1xuICAgIHJldHVybiBfX0VsZW1lbnRBbmltYXRlKHRoaXMuZWZmZWN0LnRhcmdldC5lbGVtZW50LCBbQW5pbWF0aW9uT3BlcmF0aW9uLlBBVVNFLCB0aGlzLmlkXSk7XG4gIH1cblxuICBwdWJsaWMgcGxheSgpOiB2b2lkIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIGFjY2Vzc2luZyBwcml2YXRlIG1lbWJlciAnZWxlbWVudCdcbiAgICByZXR1cm4gX19FbGVtZW50QW5pbWF0ZSh0aGlzLmVmZmVjdC50YXJnZXQuZWxlbWVudCwgW0FuaW1hdGlvbk9wZXJhdGlvbi5QTEFZLCB0aGlzLmlkXSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0KCk6IHZvaWQge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgYWNjZXNzaW5nIHByaXZhdGUgbWVtYmVyICdlbGVtZW50J1xuICAgIHJldHVybiBfX0VsZW1lbnRBbmltYXRlKHRoaXMuZWZmZWN0LnRhcmdldC5lbGVtZW50LCBbXG4gICAgICBBbmltYXRpb25PcGVyYXRpb24uU1RBUlQsXG4gICAgICB0aGlzLmlkLFxuICAgICAgdGhpcy5lZmZlY3Qua2V5ZnJhbWVzLFxuICAgICAgdGhpcy5lZmZlY3Qub3B0aW9ucyxcbiAgICBdKTtcbiAgfVxufVxuIiwiLy8gQ29weXJpZ2h0IDIwMjUgVGhlIEx5bnggQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbmltcG9ydCB0eXBlIHsgRWxlbWVudCB9IGZyb20gJy4uL2VsZW1lbnQuanMnO1xuXG5leHBvcnQgY2xhc3MgS2V5ZnJhbWVFZmZlY3Qge1xuICBwdWJsaWMgcmVhZG9ubHkgdGFyZ2V0OiBFbGVtZW50O1xuICBwdWJsaWMgcmVhZG9ubHkga2V5ZnJhbWVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXIgfCBzdHJpbmc+W107XG4gIHB1YmxpYyByZWFkb25seSBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXIgfCBzdHJpbmc+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHRhcmdldDogRWxlbWVudCxcbiAgICBrZXlmcmFtZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlciB8IHN0cmluZz5bXSxcbiAgICBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXIgfCBzdHJpbmc+LFxuICApIHtcbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICB0aGlzLmtleWZyYW1lcyA9IGtleWZyYW1lcztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAyNCBUaGUgTHlueCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuaW1wb3J0IHsgQW5pbWF0aW9uIH0gZnJvbSAnLi9hbmltYXRpb24vYW5pbWF0aW9uLmpzJztcbmltcG9ydCB7IEtleWZyYW1lRWZmZWN0IH0gZnJvbSAnLi9hbmltYXRpb24vZWZmZWN0LmpzJztcblxubGV0IHdpbGxGbHVzaCA9IGZhbHNlO1xubGV0IHNob3VsZEZsdXNoID0gdHJ1ZTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNob3VsZEZsdXNoKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gIHNob3VsZEZsdXNoID0gdmFsdWU7XG59XG5cbmV4cG9ydCBjbGFzcyBFbGVtZW50IHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBzZXQgaW4gY29uc3RydWN0b3JcbiAgcHJpdmF0ZSByZWFkb25seSBlbGVtZW50OiBFbGVtZW50Tm9kZTtcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBFbGVtZW50Tm9kZSkge1xuICAgIC8vIEluIEx5bnggdmVyc2lvbnMgcHJpb3IgdG8gYW5kIGluY2x1ZGluZyAyLjE1LFxuICAgIC8vIGEgY3Jhc2ggb2NjdXJzIHdoZW4gcHJpbnRpbmcgb3IgdHJhbnNmZXJyaW5nIHJlZkNvdW50ZWQgYWNyb3NzIHRocmVhZHMuXG4gICAgLy8gQnlwYXNzIHRoaXMgcHJvYmxlbSBieSBoaWRpbmcgdGhlIGVsZW1lbnQgb2JqZWN0LlxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnZWxlbWVudCcsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHNldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKTogdm9pZCB7XG4gICAgX19TZXRBdHRyaWJ1dGUodGhpcy5lbGVtZW50LCBuYW1lLCB2YWx1ZSk7XG4gICAgdGhpcy5mbHVzaEVsZW1lbnRUcmVlKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0U3R5bGVQcm9wZXJ0eShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBfX0FkZElubGluZVN0eWxlKHRoaXMuZWxlbWVudCwgbmFtZSwgdmFsdWUpO1xuICAgIHRoaXMuZmx1c2hFbGVtZW50VHJlZSgpO1xuICB9XG5cbiAgcHVibGljIHNldFN0eWxlUHJvcGVydGllcyhzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZXMpIHtcbiAgICAgIF9fQWRkSW5saW5lU3R5bGUodGhpcy5lbGVtZW50LCBrZXksIHN0eWxlc1trZXldISk7XG4gICAgfVxuICAgIHRoaXMuZmx1c2hFbGVtZW50VHJlZSgpO1xuICB9XG5cbiAgcHVibGljIGdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lOiBzdHJpbmcpOiB1bmtub3duIHtcbiAgICByZXR1cm4gX19HZXRBdHRyaWJ1dGVCeU5hbWUodGhpcy5lbGVtZW50LCBhdHRyaWJ1dGVOYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRBdHRyaWJ1dGVOYW1lcygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIF9fR2V0QXR0cmlidXRlTmFtZXModGhpcy5lbGVtZW50KTtcbiAgfVxuXG4gIHB1YmxpYyBxdWVyeVNlbGVjdG9yKHNlbGVjdG9yOiBzdHJpbmcpOiBFbGVtZW50IHwgbnVsbCB7XG4gICAgY29uc3QgcmVmID0gX19RdWVyeVNlbGVjdG9yKHRoaXMuZWxlbWVudCwgc2VsZWN0b3IsIHt9KTtcbiAgICByZXR1cm4gcmVmID8gbmV3IEVsZW1lbnQocmVmKSA6IG51bGw7XG4gIH1cblxuICBwdWJsaWMgcXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcjogc3RyaW5nKTogRWxlbWVudFtdIHtcbiAgICByZXR1cm4gX19RdWVyeVNlbGVjdG9yQWxsKHRoaXMuZWxlbWVudCwgc2VsZWN0b3IsIHt9KS5tYXAoKGVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRWxlbWVudChlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBhbmltYXRlKFxuICAgIGtleWZyYW1lczogUmVjb3JkPHN0cmluZywgbnVtYmVyIHwgc3RyaW5nPltdLFxuICAgIG9wdGlvbnM/OiBudW1iZXIgfCBSZWNvcmQ8c3RyaW5nLCBudW1iZXIgfCBzdHJpbmc+LFxuICApOiBBbmltYXRpb24ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRPcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09ICdudW1iZXInID8geyBkdXJhdGlvbjogb3B0aW9ucyB9IDogb3B0aW9ucyA/PyB7fTtcbiAgICByZXR1cm4gbmV3IEFuaW1hdGlvbihuZXcgS2V5ZnJhbWVFZmZlY3QodGhpcywga2V5ZnJhbWVzLCBub3JtYWxpemVkT3B0aW9ucykpO1xuICB9XG5cbiAgcHVibGljIGludm9rZShcbiAgICBtZXRob2ROYW1lOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4sXG4gICk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBfX0ludm9rZVVJTWV0aG9kKFxuICAgICAgICB0aGlzLmVsZW1lbnQsXG4gICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgIHBhcmFtcyA/PyB7fSxcbiAgICAgICAgKHJlczogeyBjb2RlOiBudW1iZXI7IGRhdGE6IHVua25vd24gfSkgPT4ge1xuICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXMuZGF0YSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1VJIG1ldGhvZCBpbnZva2U6ICcgKyBKU09OLnN0cmluZ2lmeShyZXMpKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIHRoaXMuZmx1c2hFbGVtZW50VHJlZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBmbHVzaEVsZW1lbnRUcmVlKCkge1xuICAgIGlmICh3aWxsRmx1c2ggfHwgIXNob3VsZEZsdXNoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHdpbGxGbHVzaCA9IHRydWU7XG4gICAgdm9pZCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgIHdpbGxGbHVzaCA9IGZhbHNlO1xuICAgICAgX19GbHVzaEVsZW1lbnRUcmVlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8vIENvcHlyaWdodCAyMDI0IFRoZSBMeW54IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlXG4vLyBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG5pbXBvcnQgeyBFbGVtZW50IH0gZnJvbSAnLi9lbGVtZW50LmpzJztcblxuY2xhc3MgUGFnZUVsZW1lbnQge1xuICBwcml2YXRlIHN0YXRpYyBwYWdlRWxlbWVudDogRWxlbWVudE5vZGUgfCB1bmRlZmluZWQ7XG5cbiAgc3RhdGljIGdldCgpIHtcbiAgICBQYWdlRWxlbWVudC5wYWdlRWxlbWVudCA/Pz0gX19HZXRQYWdlRWxlbWVudCgpO1xuICAgIHJldHVybiBQYWdlRWxlbWVudC5wYWdlRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlTZWxlY3Rvcihjc3NTZWxlY3Rvcjogc3RyaW5nKTogRWxlbWVudCB8IG51bGwge1xuICBjb25zdCBlbGVtZW50ID0gX19RdWVyeVNlbGVjdG9yKFBhZ2VFbGVtZW50LmdldCgpLCBjc3NTZWxlY3Rvciwge30pO1xuICByZXR1cm4gZWxlbWVudCA/IG5ldyBFbGVtZW50KGVsZW1lbnQpIDogbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5U2VsZWN0b3JBbGwoY3NzU2VsZWN0b3I6IHN0cmluZyk6IEVsZW1lbnRbXSB7XG4gIHJldHVybiBfX1F1ZXJ5U2VsZWN0b3JBbGwoUGFnZUVsZW1lbnQuZ2V0KCksIGNzc1NlbGVjdG9yLCB7fSkubWFwKFxuICAgIChlbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gbmV3IEVsZW1lbnQoZWxlbWVudCk7XG4gICAgfSxcbiAgKTtcbn1cbiIsIi8vIENvcHlyaWdodCAyMDI0IFRoZSBMeW54IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlXG4vLyBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG5leHBvcnQgZnVuY3Rpb24gaXNTZGtWZXJzaW9uR3QobWFqb3I6IG51bWJlciwgbWlub3I6IG51bWJlcik6IGJvb2xlYW4ge1xuICBjb25zdCBseW54U2RrVmVyc2lvbjogc3RyaW5nID0gU3lzdGVtSW5mby5seW54U2RrVmVyc2lvbiA/PyAnMS4wJztcbiAgY29uc3QgdmVyc2lvbiA9IGx5bnhTZGtWZXJzaW9uLnNwbGl0KCcuJyk7XG4gIHJldHVybiAoXG4gICAgTnVtYmVyKHZlcnNpb25bMF0pID4gbWFqb3JcbiAgICB8fCAoTnVtYmVyKHZlcnNpb25bMF0pID09IG1ham9yICYmIE51bWJlcih2ZXJzaW9uWzFdKSA+IG1pbm9yKVxuICApO1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMjQgVGhlIEx5bnggQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbmltcG9ydCB7IHF1ZXJ5U2VsZWN0b3IsIHF1ZXJ5U2VsZWN0b3JBbGwgfSBmcm9tICcuL2xlcHVzUXVlcnlTZWxlY3Rvci5qcyc7XG5pbXBvcnQgeyBpc1Nka1ZlcnNpb25HdCB9IGZyb20gJy4uL3V0aWxzL3ZlcnNpb24uanMnO1xuXG5mdW5jdGlvbiBpbml0QXBpRW52KCk6IHZvaWQge1xuICAvLyBAdHMtZXhwZWN0LWVycm9yIHR5cGVcbiAgbHlueC5xdWVyeVNlbGVjdG9yID0gcXVlcnlTZWxlY3RvcjtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciB0eXBlXG4gIGx5bngucXVlcnlTZWxlY3RvckFsbCA9IHF1ZXJ5U2VsZWN0b3JBbGw7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgdHlwZVxuICBnbG9iYWxUaGlzLnNldFRpbWVvdXQgPSBseW54LnNldFRpbWVvdXQgYXMgKGNiOiAoKSA9PiB2b2lkLCB0aW1lb3V0OiBudW1iZXIpID0+IG51bWJlcjtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciB0eXBlXG4gIGdsb2JhbFRoaXMuc2V0SW50ZXJ2YWwgPSBseW54LnNldEludGVydmFsIGFzIChjYjogKCkgPT4gdm9pZCwgdGltZW91dDogbnVtYmVyKSA9PiBudW1iZXI7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgdHlwZVxuICBnbG9iYWxUaGlzLmNsZWFyVGltZW91dCA9IGx5bnguY2xlYXJUaW1lb3V0IGFzICh0aW1lb3V0OiBudW1iZXIpID0+IHZvaWQ7XG4gIC8vIEluIGx5bnggMi4xNCBgY2xlYXJJbnRlcnZhbGAgaXMgbWlzdGFrZW5seSBzcGVsbGVkIGFzIGBjbGVhclRpbWVJbnRlcnZhbGAuIFRoaXMgaXMgZml4ZWQgaW4gbHlueCAyLjE1LlxuICAvLyBAdHMtZXhwZWN0LWVycm9yIHR5cGVcbiAgZ2xvYmFsVGhpcy5jbGVhckludGVydmFsID0gKGx5bnguY2xlYXJJbnRlcnZhbCA/PyBseW54LmNsZWFyVGltZUludGVydmFsKSBhcyAodGltZW91dDogbnVtYmVyKSA9PiB2b2lkO1xuXG4gIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHR5cGVcbiAgICBjb25zdCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBseW54LnJlcXVlc3RBbmltYXRpb25GcmFtZSBhcyAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IG51bWJlcjtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHR5cGVcbiAgICBseW54LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGdsb2JhbFRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gKFxuICAgICAgY2FsbGJhY2s6ICgpID0+IHZvaWQsXG4gICAgKSA9PiB7XG4gICAgICBpZiAoIWlzU2RrVmVyc2lvbkd0KDIsIDE1KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ3JlcXVlc3RBbmltYXRpb25GcmFtZSBpbiBtYWluIHRocmVhZCBzY3JpcHQgcmVxdWlyZXMgTHlueCBzZGsgdmVyc2lvbiAyLjE2JyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgIH07XG4gIH1cblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIHR5cGVcbiAgZ2xvYmFsVGhpcy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGx5bnguY2FuY2VsQW5pbWF0aW9uRnJhbWUgYXMgKHJlcXVlc3RJZDogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgeyBpbml0QXBpRW52IH07XG4iLCIvLyBDb3B5cmlnaHQgMjAyNCBUaGUgTHlueCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuZXhwb3J0IGZ1bmN0aW9uIHByb2ZpbGU8UmV0LCBGbiBleHRlbmRzICguLi5hcmdzOiB1bmtub3duW10pID0+IFJldD4oXG4gIHNsaWNlTmFtZTogc3RyaW5nLFxuICBmOiBGbixcbik6IFJldCB7XG4gIC8qIHY4IGlnbm9yZSBuZXh0IDkgKi9cbiAgLy8gVE9ETzogY2hhbmdlIGl0IHRvIF9fUFJPRklMRV9fXG4gIGlmIChfX0RFVl9fKSB7XG4gICAgY29uc29sZS5wcm9maWxlKHNsaWNlTmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGNvbnNvbGUucHJvZmlsZUVuZCgpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZigpO1xuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAyNCBUaGUgTHlueCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4vYXBpL2VsZW1lbnQuanMnO1xuaW1wb3J0IHR5cGUgeyBXb3JrbGV0UmVmLCBXb3JrbGV0UmVmSWQsIFdvcmtsZXRSZWZJbXBsIH0gZnJvbSAnLi9iaW5kaW5ncy90eXBlcy5qcyc7XG5pbXBvcnQgeyBwcm9maWxlIH0gZnJvbSAnLi91dGlscy9wcm9maWxlLmpzJztcblxuaW50ZXJmYWNlIFJlZkltcGwge1xuICBfd29ya2xldFJlZk1hcDogUmVjb3JkPFdvcmtsZXRSZWZJZCwgV29ya2xldFJlZjx1bmtub3duPj47XG4gIF9maXJzdFNjcmVlbldvcmtsZXRSZWZNYXA6IFJlY29yZDxXb3JrbGV0UmVmSWQsIFdvcmtsZXRSZWY8dW5rbm93bj4+O1xuICB1cGRhdGVXb3JrbGV0UmVmKFxuICAgIHJlZkltcGw6IFdvcmtsZXRSZWZJbXBsPEVsZW1lbnQgfCBudWxsPixcbiAgICBlbGVtZW50OiBFbGVtZW50Tm9kZSB8IG51bGwsXG4gICk6IHZvaWQ7XG4gIHVwZGF0ZVdvcmtsZXRSZWZJbml0VmFsdWVDaGFuZ2VzKHBhdGNoOiBbbnVtYmVyLCB1bmtub3duXVtdKTogdm9pZDtcbiAgY2xlYXJGaXJzdFNjcmVlbldvcmtsZXRSZWZNYXAoKTogdm9pZDtcbn1cblxubGV0IGltcGw6IFJlZkltcGwgfCB1bmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGluaXRXb3JrbGV0UmVmKCk6IFJlZkltcGwge1xuICByZXR1cm4gKGltcGwgPSB7XG4gICAgX3dvcmtsZXRSZWZNYXA6IHt9LFxuICAgIC8qKlxuICAgICAqIE1hcCBvZiB3b3JrbGV0IHJlZnMgdGhhdCBhcmUgY3JlYXRlZCBkdXJpbmcgZmlyc3Qgc2NyZWVuIHJlbmRlcmluZy5cbiAgICAgKiBUaGVzZSByZWZzIGFyZSBjcmVhdGVkIHdpdGggbmVnYXRpdmUgSURzIGFuZCBuZWVkIHRvIGJlIGh5ZHJhdGVkXG4gICAgICogd2hlbiB0aGUgYXBwIHN0YXJ0cy4gVGhlIG1hcCBpcyBjbGVhcmVkIGFmdGVyIGh5ZHJhdGlvbiBpcyBjb21wbGV0ZVxuICAgICAqIHRvIGZyZWUgdXAgbWVtb3J5LlxuICAgICAqL1xuICAgIF9maXJzdFNjcmVlbldvcmtsZXRSZWZNYXA6IHt9LFxuICAgIHVwZGF0ZVdvcmtsZXRSZWYsXG4gICAgdXBkYXRlV29ya2xldFJlZkluaXRWYWx1ZUNoYW5nZXMsXG4gICAgY2xlYXJGaXJzdFNjcmVlbldvcmtsZXRSZWZNYXAsXG4gIH0pO1xufVxuXG5jb25zdCBjcmVhdGVXb3JrbGV0UmVmID0gPFQ+KFxuICBpZDogV29ya2xldFJlZklkLFxuICB2YWx1ZTogVCxcbik6IFdvcmtsZXRSZWY8VD4gPT4ge1xuICByZXR1cm4ge1xuICAgIGN1cnJlbnQ6IHZhbHVlLFxuICAgIF93dmlkOiBpZCxcbiAgfTtcbn07XG5cbmNvbnN0IGdldEZyb21Xb3JrbGV0UmVmTWFwID0gPFQ+KFxuICByZWZJbXBsOiBXb3JrbGV0UmVmSW1wbDxUPixcbik6IFdvcmtsZXRSZWY8VD4gPT4ge1xuICBjb25zdCBpZCA9IHJlZkltcGwuX3d2aWQ7XG4gIGxldCB2YWx1ZTtcbiAgaWYgKGlkIDwgMCkge1xuICAgIC8vIEF0IHRoZSBmaXJzdCBzY3JlZW4gcmVuZGVyaW5nLCB0aGUgd29ya2xldCByZWYgaXMgY3JlYXRlZCB3aXRoIGEgbmVnYXRpdmUgSUQuXG4gICAgLy8gTWlnaHQgYmUgY2FsbGVkIGluIHR3byBzY2VuYXJpb3M6XG4gICAgLy8gMS4gSW4gTVRTIGV2ZW50c1xuICAgIC8vIDIuIEluIGBtYWluLXRocmVhZDpyZWZgXG4gICAgdmFsdWUgPSBpbXBsIS5fZmlyc3RTY3JlZW5Xb3JrbGV0UmVmTWFwW2lkXSBhcyBXb3JrbGV0UmVmPFQ+O1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHZhbHVlID0gaW1wbCEuX2ZpcnN0U2NyZWVuV29ya2xldFJlZk1hcFtpZF0gPSBjcmVhdGVXb3JrbGV0UmVmKGlkLCByZWZJbXBsLl9pbml0VmFsdWUpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGltcGwhLl93b3JrbGV0UmVmTWFwW2lkXSBhcyBXb3JrbGV0UmVmPFQ+O1xuICB9XG5cbiAgLyogdjggaWdub3JlIG5leHQgMyAqL1xuICBpZiAoX19ERVZfXyAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdXb3JrbGV0OiByZWYgaXMgbm90IGluaXRpYWxpemVkOiAnICsgaWQpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbmZ1bmN0aW9uIHJlbW92ZVZhbHVlRnJvbVdvcmtsZXRSZWZNYXAoaWQ6IFdvcmtsZXRSZWZJZCk6IHZvaWQge1xuICBkZWxldGUgaW1wbCEuX3dvcmtsZXRSZWZNYXBbaWRdO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBlbGVtZW50IGluc3RhbmNlIG9mIHRoZSBnaXZlbiBlbGVtZW50IG5vZGUsIHRoZW4gc2V0IHRoZSB3b3JrbGV0IHZhbHVlIHRvIGl0LlxuICogVGhpcyBpcyBjYWxsZWQgaW4gYHNuYXBzaG90Q29udGV4dFVwZGF0ZVdvcmtsZXRSZWZgLlxuICogQHBhcmFtIGhhbmRsZSBoYW5kbGUgb2YgdGhlIHdvcmtsZXQgdmFsdWUuXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgZWxlbWVudCBub2RlLlxuICovXG5mdW5jdGlvbiB1cGRhdGVXb3JrbGV0UmVmKFxuICBoYW5kbGU6IFdvcmtsZXRSZWZJbXBsPEVsZW1lbnQgfCBudWxsPixcbiAgZWxlbWVudDogRWxlbWVudE5vZGUgfCBudWxsLFxuKTogdm9pZCB7XG4gIGdldEZyb21Xb3JrbGV0UmVmTWFwKGhhbmRsZSkuY3VycmVudCA9IGVsZW1lbnRcbiAgICA/IG5ldyBFbGVtZW50KGVsZW1lbnQpXG4gICAgOiBudWxsO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVXb3JrbGV0UmVmSW5pdFZhbHVlQ2hhbmdlcyhcbiAgcGF0Y2g6IFtXb3JrbGV0UmVmSWQsIHVua25vd25dW10sXG4pOiB2b2lkIHtcbiAgcHJvZmlsZSgndXBkYXRlV29ya2xldFJlZkluaXRWYWx1ZUNoYW5nZXMnLCAoKSA9PiB7XG4gICAgcGF0Y2guZm9yRWFjaCgoW2lkLCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICghaW1wbCEuX3dvcmtsZXRSZWZNYXBbaWRdKSB7XG4gICAgICAgIGltcGwhLl93b3JrbGV0UmVmTWFwW2lkXSA9IGNyZWF0ZVdvcmtsZXRSZWYoaWQsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyRmlyc3RTY3JlZW5Xb3JrbGV0UmVmTWFwKCk6IHZvaWQge1xuICBpbXBsIS5fZmlyc3RTY3JlZW5Xb3JrbGV0UmVmTWFwID0ge307XG59XG5cbmV4cG9ydCB7XG4gIHR5cGUgUmVmSW1wbCxcbiAgY3JlYXRlV29ya2xldFJlZixcbiAgaW5pdFdvcmtsZXRSZWYsXG4gIGdldEZyb21Xb3JrbGV0UmVmTWFwLFxuICByZW1vdmVWYWx1ZUZyb21Xb3JrbGV0UmVmTWFwLFxuICB1cGRhdGVXb3JrbGV0UmVmSW5pdFZhbHVlQ2hhbmdlcyxcbn07XG4iLCIvLyBDb3B5cmlnaHQgMjAyNCBUaGUgTHlueCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuaW1wb3J0IHsgV29ya2xldEV2ZW50cyB9IGZyb20gJy4vYmluZGluZ3MvZXZlbnRzLmpzJztcbmltcG9ydCB0eXBlIHsgUmVsZWFzZVdvcmtsZXRSZWZEYXRhLCBSdW5Xb3JrbGV0Q3R4RGF0YSwgUnVuV29ya2xldEN0eFJldERhdGEgfSBmcm9tICcuL2JpbmRpbmdzL2V2ZW50cy5qcyc7XG5pbXBvcnQgdHlwZSB7IENsb3N1cmVWYWx1ZVR5cGUgfSBmcm9tICcuL2JpbmRpbmdzL3R5cGVzLmpzJztcbmltcG9ydCB0eXBlIHsgRXZlbnQgfSBmcm9tICcuL3R5cGVzL3J1bnRpbWVQcm94eS5qcyc7XG5pbXBvcnQgeyByZW1vdmVWYWx1ZUZyb21Xb3JrbGV0UmVmTWFwIH0gZnJvbSAnLi93b3JrbGV0UmVmLmpzJztcblxuZnVuY3Rpb24gaW5pdEV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuICBjb25zdCBqc0NvbnRleHQgPSBseW54LmdldEpTQ29udGV4dCgpO1xuICBqc0NvbnRleHQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBXb3JrbGV0RXZlbnRzLnJ1bldvcmtsZXRDdHgsXG4gICAgKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSBhcyBzdHJpbmcpIGFzIFJ1bldvcmtsZXRDdHhEYXRhO1xuICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBydW5Xb3JrbGV0KGRhdGEud29ya2xldCwgZGF0YS5wYXJhbXMgYXMgQ2xvc3VyZVZhbHVlVHlwZVtdKTtcbiAgICAgIGpzQ29udGV4dC5kaXNwYXRjaEV2ZW50KHtcbiAgICAgICAgdHlwZTogV29ya2xldEV2ZW50cy5GdW5jdGlvbkNhbGxSZXQsXG4gICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICByZXNvbHZlSWQ6IGRhdGEucmVzb2x2ZUlkLFxuICAgICAgICAgIHJldHVyblZhbHVlLFxuICAgICAgICB9IGFzIFJ1bldvcmtsZXRDdHhSZXREYXRhKSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICk7XG4gIGpzQ29udGV4dC5hZGRFdmVudExpc3RlbmVyKFxuICAgIFdvcmtsZXRFdmVudHMucmVsZWFzZVdvcmtsZXRSZWYsXG4gICAgKGV2ZW50OiBFdmVudCkgPT4ge1xuICAgICAgcmVtb3ZlVmFsdWVGcm9tV29ya2xldFJlZk1hcCgoZXZlbnQuZGF0YSBhcyBSZWxlYXNlV29ya2xldFJlZkRhdGEpLmlkKTtcbiAgICB9LFxuICApO1xufVxuXG5leHBvcnQgeyBpbml0RXZlbnRMaXN0ZW5lcnMgfTtcbiIsIi8vIENvcHlyaWdodCAyMDI0IFRoZSBMeW54IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UgVmVyc2lvbiAyLjAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlXG4vLyBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG5pbXBvcnQgdHlwZSB7IEpzRm5IYW5kbGUgfSBmcm9tICcuL2JpbmRpbmdzL3R5cGVzLmpzJztcblxuaW50ZXJmYWNlIERldGFpbHMge1xuICB0YXNrOiAoZm5JZDogbnVtYmVyLCBleGVjSWQ6IG51bWJlcikgPT4gdm9pZDtcblxuICAvLyBUaGlzIGNvbWVzIGZyb20gdGhlIGJhY2tncm91bmQgdGhyZWFkLCBpbnNlcnRlZCBoZXJlIGR1cmluZyBjdHggaHlkcmF0aW9uLlxuICBqc0ZuSGFuZGxlPzogSnNGbkhhbmRsZTtcbn1cblxuaW50ZXJmYWNlIFJ1bk9uQmFja2dyb3VuZERlbGF5SW1wbCB7XG4gIC8vIEVsZW1lbnRzIHNob3VsZCBrZWVwIHRoZSBvcmRlciBiZWluZyBjYWxsZWQgYnkgdGhlIHVzZXIuXG4gIGRlbGF5ZWRCYWNrZ3JvdW5kRnVuY3Rpb25BcnJheTogRGV0YWlsc1tdO1xuICBkZWxheVJ1bk9uQmFja2dyb3VuZChmbk9iajogSnNGbkhhbmRsZSwgZm46IChmbklkOiBudW1iZXIsIGV4ZWNJZDogbnVtYmVyKSA9PiB2b2lkKTogdm9pZDtcbiAgcnVuRGVsYXllZEJhY2tncm91bmRGdW5jdGlvbnMoKTogdm9pZDtcbn1cblxubGV0IGltcGw6IFJ1bk9uQmFja2dyb3VuZERlbGF5SW1wbCB8IHVuZGVmaW5lZDtcblxuZnVuY3Rpb24gaW5pdFJ1bk9uQmFja2dyb3VuZERlbGF5KCk6IFJ1bk9uQmFja2dyb3VuZERlbGF5SW1wbCB7XG4gIHJldHVybiAoaW1wbCA9IHtcbiAgICBkZWxheWVkQmFja2dyb3VuZEZ1bmN0aW9uQXJyYXk6IFtdLFxuICAgIGRlbGF5UnVuT25CYWNrZ3JvdW5kLFxuICAgIHJ1bkRlbGF5ZWRCYWNrZ3JvdW5kRnVuY3Rpb25zLFxuICB9KTtcbn1cblxuZnVuY3Rpb24gZGVsYXlSdW5PbkJhY2tncm91bmQoZm5PYmo6IEpzRm5IYW5kbGUsIHRhc2s6IChmbklkOiBudW1iZXIsIGV4ZWNJZDogbnVtYmVyKSA9PiB2b2lkKSB7XG4gIGltcGwhLmRlbGF5ZWRCYWNrZ3JvdW5kRnVuY3Rpb25BcnJheS5wdXNoKHsgdGFzayB9KTtcbiAgY29uc3QgZGVsYXlJbmRpY2VzID0gZm5PYmouX2RlbGF5SW5kaWNlcyA/Pz0gW107XG4gIGRlbGF5SW5kaWNlcy5wdXNoKGltcGwhLmRlbGF5ZWRCYWNrZ3JvdW5kRnVuY3Rpb25BcnJheS5sZW5ndGggLSAxKTtcbn1cblxuZnVuY3Rpb24gcnVuRGVsYXllZEJhY2tncm91bmRGdW5jdGlvbnMoKTogdm9pZCB7XG4gIGZvciAoY29uc3QgZGV0YWlscyBvZiBpbXBsIS5kZWxheWVkQmFja2dyb3VuZEZ1bmN0aW9uQXJyYXkpIHtcbiAgICBpZiAoZGV0YWlscy5qc0ZuSGFuZGxlKSB7XG4gICAgICBkZXRhaWxzLnRhc2soZGV0YWlscy5qc0ZuSGFuZGxlLl9qc0ZuSWQhLCBkZXRhaWxzLmpzRm5IYW5kbGUuX2V4ZWNJZCEpO1xuICAgIH1cbiAgfVxuICBpbXBsIS5kZWxheWVkQmFja2dyb3VuZEZ1bmN0aW9uQXJyYXkubGVuZ3RoID0gMDtcbn1cblxuZXhwb3J0IHsgdHlwZSBSdW5PbkJhY2tncm91bmREZWxheUltcGwsIGluaXRSdW5PbkJhY2tncm91bmREZWxheSB9O1xuIiwiLy8gQ29weXJpZ2h0IDIwMjQgVGhlIEx5bnggQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbmltcG9ydCB0eXBlIHsgQ2xvc3VyZVZhbHVlVHlwZSwgV29ya2xldCB9IGZyb20gJy4vYmluZGluZ3MvdHlwZXMuanMnO1xuaW1wb3J0IHsgcHJvZmlsZSB9IGZyb20gJy4vdXRpbHMvcHJvZmlsZS5qcyc7XG5cbmludGVyZmFjZSBFdmVudERlbGF5SW1wbCB7XG4gIF9kZWxheWVkV29ya2xldFBhcmFtc01hcDogTWFwPHN0cmluZywgQ2xvc3VyZVZhbHVlVHlwZVtdW10+O1xuICBydW5EZWxheWVkV29ya2xldCh3b3JrbGV0OiBXb3JrbGV0LCBlbGVtZW50OiBFbGVtZW50Tm9kZSk6IHZvaWQ7XG4gIGNsZWFyRGVsYXllZFdvcmtsZXRzKCk6IHZvaWQ7XG59XG5cbmxldCBpbXBsOiBFdmVudERlbGF5SW1wbCB8IHVuZGVmaW5lZDtcblxuZnVuY3Rpb24gaW5pdEV2ZW50RGVsYXkoKTogRXZlbnREZWxheUltcGwge1xuICByZXR1cm4gKGltcGwgPSB7XG4gICAgX2RlbGF5ZWRXb3JrbGV0UGFyYW1zTWFwOiBuZXcgTWFwKCksXG4gICAgcnVuRGVsYXllZFdvcmtsZXQsXG4gICAgY2xlYXJEZWxheWVkV29ya2xldHMsXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkZWxheUV4ZWNVbnRpbEpzUmVhZHkoXG4gIGhhc2g6IHN0cmluZyxcbiAgcGFyYW1zOiBDbG9zdXJlVmFsdWVUeXBlW10sXG4pOiB2b2lkIHtcbiAgcHJvZmlsZSgnZGVsYXlFeGVjVW50aWxKc1JlYWR5OiAnICsgaGFzaCwgKCkgPT4ge1xuICAgIGNvbnN0IG1hcCA9IGltcGwhLl9kZWxheWVkV29ya2xldFBhcmFtc01hcDtcbiAgICBjb25zdCBwYXJhbVZlYyA9IG1hcC5nZXQoaGFzaCk7XG4gICAgaWYgKHBhcmFtVmVjKSB7XG4gICAgICBwYXJhbVZlYy5wdXNoKHBhcmFtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hcC5zZXQoaGFzaCwgW3BhcmFtc10pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJ1bkRlbGF5ZWRXb3JrbGV0KHdvcmtsZXQ6IFdvcmtsZXQsIGVsZW1lbnQ6IEVsZW1lbnROb2RlKTogdm9pZCB7XG4gIHByb2ZpbGUoJ2NvbW1pdERlbGF5ZWRXb3JrbGV0JywgKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtc1ZlYyA9IGltcGwhLl9kZWxheWVkV29ya2xldFBhcmFtc01hcC5nZXQoXG4gICAgICB3b3JrbGV0Ll93a2x0SWQsXG4gICAgKTtcbiAgICBpZiAocGFyYW1zVmVjID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGVmdFBhcmFtc1ZlYzogQ2xvc3VyZVZhbHVlVHlwZVtdW10gPSBbXTtcbiAgICBwYXJhbXNWZWMuZm9yRWFjaCgocGFyYW1zKSA9PiB7XG4gICAgICBjb25zdCBmaXJzdFBhcmFtID0gcGFyYW1zWzBdIGFzIHsgY3VycmVudFRhcmdldD86IHsgZWxlbWVudFJlZnB0cj86IEVsZW1lbnROb2RlIH0gfSB8IHVuZGVmaW5lZDtcbiAgICAgIGlmIChmaXJzdFBhcmFtPy5jdXJyZW50VGFyZ2V0Py5lbGVtZW50UmVmcHRyID09PSBlbGVtZW50KSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHByb2ZpbGUoJ3J1bkRlbGF5ZWRXb3JrbGV0JywgKCkgPT4ge1xuICAgICAgICAgICAgcnVuV29ya2xldCh3b3JrbGV0LCBwYXJhbXMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxlZnRQYXJhbXNWZWMucHVzaChwYXJhbXMpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGltcGwhLl9kZWxheWVkV29ya2xldFBhcmFtc01hcC5zZXQoXG4gICAgICB3b3JrbGV0Ll93a2x0SWQsXG4gICAgICBsZWZ0UGFyYW1zVmVjLFxuICAgICk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjbGVhckRlbGF5ZWRXb3JrbGV0cygpOiB2b2lkIHtcbiAgaW1wbCEuX2RlbGF5ZWRXb3JrbGV0UGFyYW1zTWFwLmNsZWFyKCk7XG59XG5cbmV4cG9ydCB7IHR5cGUgRXZlbnREZWxheUltcGwsIGluaXRFdmVudERlbGF5LCBkZWxheUV4ZWNVbnRpbEpzUmVhZHksIHJ1bkRlbGF5ZWRXb3JrbGV0LCBjbGVhckRlbGF5ZWRXb3JrbGV0cyB9O1xuIiwiLy8gQ29weXJpZ2h0IDIwMjUgVGhlIEx5bnggQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbmltcG9ydCB7IHNldFNob3VsZEZsdXNoIH0gZnJvbSAnLi9hcGkvZWxlbWVudC5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW9tSW1wbCB7XG4gIHNldFNob3VsZEZsdXNoKHZhbHVlOiBib29sZWFuKTogdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRFb21JbXBsKCk6IEVvbUltcGwge1xuICByZXR1cm4ge1xuICAgIHNldFNob3VsZEZsdXNoLFxuICB9O1xufVxuIiwiLy8gQ29weXJpZ2h0IDIwMjQgVGhlIEx5bnggQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cblxuaW1wb3J0IHR5cGUgeyBDbG9zdXJlVmFsdWVUeXBlLCBKc0ZuSGFuZGxlLCBXb3JrbGV0LCBXb3JrbGV0UmVmSWQsIFdvcmtsZXRSZWZJbXBsIH0gZnJvbSAnLi9iaW5kaW5ncy9pbmRleC5qcyc7XG5pbXBvcnQgeyBwcm9maWxlIH0gZnJvbSAnLi91dGlscy9wcm9maWxlLmpzJztcblxuLyoqXG4gKiBIeWRyYXRlcyBhIFdvcmtsZXQgY29udGV4dCB3aXRoIGRhdGEgZnJvbSBhIGZpcnN0LXNjcmVlbiBXb3JrbGV0IGNvbnRleHQuXG4gKiBUaGlzIHByb2Nlc3MgaXMgdHlwaWNhbGx5IHVzZWQgdG8gcnVuIGFsbCBkZWxheWVkIGBydW5PbkJhY2tncm91bmRgIGZ1bmN0aW9uc1xuICogYW5kIGluaXRpYWxpemUgYFdvcmtsZXRSZWZgIHZhbHVlcyBtb2RpZmllZCBiZWZvcmUgaHlkcmF0aW9uLlxuICpcbiAqIEBwYXJhbSBjdHggVGhlIHRhcmdldCBXb3JrbGV0IGNvbnRleHQgdG8gYmUgaHlkcmF0ZWQuXG4gKiBAcGFyYW0gZmlyc3RTY3JlZW5DdHggVGhlIFdvcmtsZXQgY29udGV4dCBmcm9tIHRoZSBmaXJzdCBzY3JlZW4gcmVuZGVyaW5nLFxuICogICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5pbmcgdGhlIGRhdGEgdG8gaHlkcmF0ZSB3aXRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaHlkcmF0ZUN0eChjdHg6IFdvcmtsZXQsIGZpcnN0U2NyZWVuQ3R4OiBXb3JrbGV0KTogdm9pZCB7XG4gIHByb2ZpbGUoJ2h5ZHJhdGVDdHgnLCAoKSA9PiB7XG4gICAgaHlkcmF0ZUN0eEltcGwoY3R4LCBmaXJzdFNjcmVlbkN0eCwgY3R4Ll9leGVjSWQhKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGh5ZHJhdGVDdHhJbXBsKGN0eDogQ2xvc3VyZVZhbHVlVHlwZSwgZmlyc3RTY3JlZW5DdHg6IENsb3N1cmVWYWx1ZVR5cGUsIGV4ZWNJZDogbnVtYmVyKTogdm9pZCB7XG4gIGlmICghY3R4IHx8IHR5cGVvZiBjdHggIT09ICdvYmplY3QnIHx8ICFmaXJzdFNjcmVlbkN0eCB8fCB0eXBlb2YgZmlyc3RTY3JlZW5DdHggIT09ICdvYmplY3QnKSByZXR1cm47XG5cbiAgY29uc3QgY3R4T2JqID0gY3R4IGFzIFJlY29yZDxzdHJpbmcsIENsb3N1cmVWYWx1ZVR5cGU+O1xuICBjb25zdCBmaXJzdFNjcmVlbkN0eE9iaiA9IGZpcnN0U2NyZWVuQ3R4IGFzIFJlY29yZDxzdHJpbmcsIENsb3N1cmVWYWx1ZVR5cGU+O1xuXG4gIGlmIChjdHhPYmpbJ193a2x0SWQnXSAmJiBjdHhPYmpbJ193a2x0SWQnXSAhPT0gZmlyc3RTY3JlZW5DdHhPYmpbJ193a2x0SWQnXSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZm9yLWluLWFycmF5XG4gIGZvciAoY29uc3Qga2V5IGluIGN0eCkge1xuICAgIGlmIChrZXkgPT09ICdfd3ZpZCcpIHtcbiAgICAgIGh5ZHJhdGVNYWluVGhyZWFkUmVmKGN0eE9ialtrZXldIGFzIFdvcmtsZXRSZWZJZCwgZmlyc3RTY3JlZW5DdHhPYmogYXMgdW5rbm93biBhcyBXb3JrbGV0UmVmSW1wbDx1bmtub3duPik7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdfanNGbicpIHtcbiAgICAgIGh5ZHJhdGVEZWxheVJ1bk9uQmFja2dyb3VuZFRhc2tzKFxuICAgICAgICBjdHhPYmpba2V5XSBhcyBSZWNvcmQ8c3RyaW5nLCBKc0ZuSGFuZGxlPixcbiAgICAgICAgZmlyc3RTY3JlZW5DdHhPYmpba2V5XSBhcyBSZWNvcmQ8c3RyaW5nLCBKc0ZuSGFuZGxlPixcbiAgICAgICAgZXhlY0lkLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZmlyc3RTY3JlZW5WYWx1ZSA9IHR5cGVvZiBmaXJzdFNjcmVlbkN0eE9ialtrZXldID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gKGZpcnN0U2NyZWVuQ3R4T2JqW2tleV0gYXMgeyBjdHg6IENsb3N1cmVWYWx1ZVR5cGUgfSkuY3R4XG4gICAgICAgIDogZmlyc3RTY3JlZW5DdHhPYmpba2V5XTtcbiAgICAgIGh5ZHJhdGVDdHhJbXBsKGN0eE9ialtrZXldLCBmaXJzdFNjcmVlblZhbHVlLCBleGVjSWQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEh5ZHJhdGVzIGEgV29ya2xldFJlZiBvbiB0aGUgbWFpbiB0aHJlYWQuXG4gKiBUaGlzIGlzIHVzZWQgdG8gdXBkYXRlIHRoZSBXb3JrbGV0UmVmJ3MgYmFja2dyb3VuZCBpbml0aWFsIHZhbHVlIGJhc2VkIG9uIGNoYW5nZXNcbiAqIHRoYXQgb2NjdXJyZWQgaW4gdGhlIGZpcnN0LXNjcmVlbiBXb3JrbGV0IGNvbnRleHQgYmVmb3JlIGh5ZHJhdGlvbi5cbiAqXG4gKiBAcGFyYW0gcmVmSWQgVGhlIElEIG9mIHRoZSBXb3JrbGV0UmVmIHRvIGh5ZHJhdGUuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIG5ldyB2YWx1ZSBmb3IgdGhlIFdvcmtsZXRSZWYuXG4gKi9cbmZ1bmN0aW9uIGh5ZHJhdGVNYWluVGhyZWFkUmVmKHJlZklkOiBXb3JrbGV0UmVmSWQsIHZhbHVlOiBXb3JrbGV0UmVmSW1wbDx1bmtub3duPiB8IHsgY3VycmVudDogdW5rbm93biB9KSB7XG4gIGlmICgnX2luaXRWYWx1ZScgaW4gdmFsdWUpIHtcbiAgICAvLyBUaGUgcmVmIGhhcyBub3QgYmVlbiBhY2Nlc3NlZCB5ZXQuXG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHJlZiA9IGx5bnhXb3JrbGV0SW1wbCEuX3JlZkltcGwuX3dvcmtsZXRSZWZNYXBbcmVmSWRdITtcbiAgcmVmLmN1cnJlbnQgPSB2YWx1ZS5jdXJyZW50O1xufVxuXG4vKipcbiAqIEh5ZHJhdGVzIGRlbGF5ZWQgYHJ1bk9uQmFja2dyb3VuZGAgdGFza3MuXG4gKiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXMgdGhhdCBhbnkgYHJ1bk9uQmFja2dyb3VuZGAgY2FsbHMgdGhhdCB3ZXJlIGRlbGF5ZWRcbiAqIGR1cmluZyB0aGUgZmlyc3Qtc2NyZWVuIHJlbmRlcmluZyBhcmUgY29ycmVjdGx5IGFzc29jaWF0ZWQgd2l0aCB0aGVpclxuICogcmVzcGVjdGl2ZSBKYXZhU2NyaXB0IGZ1bmN0aW9uIGhhbmRsZXMgaW4gdGhlIGh5ZHJhdGVkIFdvcmtsZXQgY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gaHlkcmF0ZURlbGF5UnVuT25CYWNrZ3JvdW5kVGFza3MoXG4gIGZuT2JqczogUmVjb3JkPHN0cmluZywgSnNGbkhhbmRsZT4sIC8vIGV4YW1wbGU6IHtcIl9qc0ZuMVwiOntcIl9qc0ZuSWRcIjoxfX1cbiAgZmlyc3RTY3JlZW5Gbk9ianM6IFJlY29yZDxzdHJpbmcsIEpzRm5IYW5kbGU+LCAvLyBleGFtcGxlOiB7XCJfanNGbjFcIjp7XCJfaXNGaXJzdFNjcmVlblwiOnRydWUsXCJfZGVsYXlJbmRpY2VzXCI6WzBdfX1cbiAgZXhlY0lkOiBudW1iZXIsXG4pIHtcbiAgZm9yIChjb25zdCBmbk5hbWUgaW4gZm5PYmpzKSB7XG4gICAgY29uc3QgZm5PYmogPSBmbk9ianNbZm5OYW1lXSE7XG4gICAgY29uc3QgZmlyc3RTY3JlZW5Gbk9iajogSnNGbkhhbmRsZSB8IHVuZGVmaW5lZCA9IGZpcnN0U2NyZWVuRm5PYmpzW2ZuTmFtZV07XG4gICAgaWYgKCFmaXJzdFNjcmVlbkZuT2JqPy5fZGVsYXlJbmRpY2VzKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBpbmRleCBvZiBmaXJzdFNjcmVlbkZuT2JqLl9kZWxheUluZGljZXMpIHtcbiAgICAgIGNvbnN0IGRldGFpbHMgPSBseW54V29ya2xldEltcGwhLl9ydW5PbkJhY2tncm91bmREZWxheUltcGwuZGVsYXllZEJhY2tncm91bmRGdW5jdGlvbkFycmF5W2luZGV4XSE7XG4gICAgICBmbk9iai5fZXhlY0lkID0gZXhlY0lkO1xuICAgICAgZGV0YWlscy5qc0ZuSGFuZGxlID0gZm5PYmo7XG4gICAgfVxuICB9XG59XG4iLCIvLyBDb3B5cmlnaHQgMjAyNCBUaGUgTHlueCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuaW1wb3J0IHsgV29ya2xldEV2ZW50cyB9IGZyb20gJy4vYmluZGluZ3MvZXZlbnRzLmpzJztcbmltcG9ydCB7IHByb2ZpbGUgfSBmcm9tICcuL3V0aWxzL3Byb2ZpbGUuanMnO1xuaW1wb3J0IHsgaXNTZGtWZXJzaW9uR3QgfSBmcm9tICcuL3V0aWxzL3ZlcnNpb24uanMnO1xuXG4vKipcbiAqIGBKc0Z1bmN0aW9uTGlmZWN5Y2xlTWFuYWdlcmAgbW9uaXRvcnMgcmVmZXJlbmNlcyB0byBKUyBmdW5jdGlvbiBoYW5kbGVzIHRvIGJlIGNhbGxlZCBieSBgcnVuT25CYWNrZ3JvdW5kKClgLlxuICogSW4gSlMgY29udGV4dCwgZnVuY3Rpb25zIHRvIGJlIGNhbGxlZCBieSBgcnVuT25CYWNrZ3JvdW5kKClgIGlzIHJlZmVyZW5jZWQgYnkgYEpzRm5IYW5kbGVgcyBhbmQgZmluYWxseSBieSBgZXhlY0lkYC5cbiAqIFdoZW4gYWxsIGBKc0ZuSGFuZGxlYHMgaW4gbGVwdXMgYXJlIHJlbGVhc2VkLCBhbiBldmVudCB3aWxsIGJlIHNlbnQgdG8gSlMgY29udGV4dCB0byBkZS1yZWYgdGhlIGBleGVjSWRgLFxuICogcmVzdWx0aW5nIGEgZGUtcmVmIHRvIHRoZSBqcyBmdW5jdGlvbiBpbiBKUyBjb250ZXh0LlxuICovXG5jbGFzcyBKc0Z1bmN0aW9uTGlmZWN5Y2xlTWFuYWdlciB7XG4gIHByaXZhdGUgZXhlY0lkUmVmQ291bnQgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xuICBwcml2YXRlIGV4ZWNJZFNldFRvRmlyZSA9IG5ldyBTZXQ8bnVtYmVyPigpO1xuICBwcml2YXRlIHdpbGxGaXJlID0gZmFsc2U7XG4gIHByaXZhdGUgcmVnaXN0cnk/OiBGaW5hbGl6YXRpb25SZWdpc3RyeTxudW1iZXI+ID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVnaXN0cnkgPSBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnk8bnVtYmVyPih0aGlzLnJlbW92ZVJlZi5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGFkZFJlZihleGVjSWQ6IG51bWJlciwgb2JqVG9SZWY6IG9iamVjdCk6IHZvaWQge1xuICAgIHRoaXMuZXhlY0lkUmVmQ291bnQuc2V0KFxuICAgICAgZXhlY0lkLFxuICAgICAgKHRoaXMuZXhlY0lkUmVmQ291bnQuZ2V0KGV4ZWNJZCkgPz8gMCkgKyAxLFxuICAgICk7XG4gICAgdGhpcy5yZWdpc3RyeSEucmVnaXN0ZXIob2JqVG9SZWYsIGV4ZWNJZCk7XG4gIH1cblxuICByZW1vdmVSZWYoZXhlY0lkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByYyA9IHRoaXMuZXhlY0lkUmVmQ291bnQuZ2V0KGV4ZWNJZCkhO1xuICAgIGlmIChyYyA+IDEpIHtcbiAgICAgIHRoaXMuZXhlY0lkUmVmQ291bnQuc2V0KGV4ZWNJZCwgcmMgLSAxKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5leGVjSWRSZWZDb3VudC5kZWxldGUoZXhlY0lkKTtcbiAgICB0aGlzLmV4ZWNJZFNldFRvRmlyZS5hZGQoZXhlY0lkKTtcbiAgICBpZiAoIXRoaXMud2lsbEZpcmUpIHtcbiAgICAgIHRoaXMud2lsbEZpcmUgPSB0cnVlO1xuICAgICAgdm9pZCBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5maXJlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmaXJlKCk6IHZvaWQge1xuICAgIHByb2ZpbGUoJ0pzRnVuY3Rpb25MaWZlY3ljbGVNYW5hZ2VyLmZpcmUnLCAoKSA9PiB7XG4gICAgICBseW54LmdldEpTQ29udGV4dCgpLmRpc3BhdGNoRXZlbnQoe1xuICAgICAgICB0eXBlOiBXb3JrbGV0RXZlbnRzLnJlbGVhc2VCYWNrZ3JvdW5kV29ya2xldEN0eCxcbiAgICAgICAgZGF0YTogQXJyYXkuZnJvbSh0aGlzLmV4ZWNJZFNldFRvRmlyZSksXG4gICAgICB9KTtcbiAgICAgIHRoaXMuZXhlY0lkU2V0VG9GaXJlLmNsZWFyKCk7XG4gICAgICB0aGlzLndpbGxGaXJlID0gZmFsc2U7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNSdW5PbkJhY2tncm91bmRFbmFibGVkKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNTZGtWZXJzaW9uR3QoMiwgMTUpO1xufVxuXG5leHBvcnQgeyBKc0Z1bmN0aW9uTGlmZWN5Y2xlTWFuYWdlciwgaXNSdW5PbkJhY2tncm91bmRFbmFibGVkIH07XG4iLCIvLyBDb3B5cmlnaHQgMjAyNCBUaGUgTHlueCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlIFZlcnNpb24gMi4wIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuaW1wb3J0IHsgRWxlbWVudCB9IGZyb20gJy4vYXBpL2VsZW1lbnQuanMnO1xuaW1wb3J0IHR5cGUgeyBDbG9zdXJlVmFsdWVUeXBlLCBXb3JrbGV0LCBXb3JrbGV0UmVmSW1wbCB9IGZyb20gJy4vYmluZGluZ3MvdHlwZXMuanMnO1xuaW1wb3J0IHsgaW5pdFJ1bk9uQmFja2dyb3VuZERlbGF5IH0gZnJvbSAnLi9kZWxheVJ1bk9uQmFja2dyb3VuZC5qcyc7XG5pbXBvcnQgeyBkZWxheUV4ZWNVbnRpbEpzUmVhZHksIGluaXRFdmVudERlbGF5IH0gZnJvbSAnLi9kZWxheVdvcmtsZXRFdmVudC5qcyc7XG5pbXBvcnQgeyBpbml0RW9tSW1wbCB9IGZyb20gJy4vZW9tSW1wbC5qcyc7XG5pbXBvcnQgeyBoeWRyYXRlQ3R4IH0gZnJvbSAnLi9oeWRyYXRlLmpzJztcbmltcG9ydCB7IEpzRnVuY3Rpb25MaWZlY3ljbGVNYW5hZ2VyLCBpc1J1bk9uQmFja2dyb3VuZEVuYWJsZWQgfSBmcm9tICcuL2pzRnVuY3Rpb25MaWZlY3ljbGUuanMnO1xuaW1wb3J0IHsgcHJvZmlsZSB9IGZyb20gJy4vdXRpbHMvcHJvZmlsZS5qcyc7XG5pbXBvcnQgeyBnZXRGcm9tV29ya2xldFJlZk1hcCwgaW5pdFdvcmtsZXRSZWYgfSBmcm9tICcuL3dvcmtsZXRSZWYuanMnO1xuXG5mdW5jdGlvbiBpbml0V29ya2xldCgpOiB2b2lkIHtcbiAgZ2xvYmFsVGhpcy5seW54V29ya2xldEltcGwgPSB7XG4gICAgX3dvcmtsZXRNYXA6IHt9LFxuICAgIF9yZWZJbXBsOiBpbml0V29ya2xldFJlZigpLFxuICAgIF9ydW5PbkJhY2tncm91bmREZWxheUltcGw6IGluaXRSdW5PbkJhY2tncm91bmREZWxheSgpLFxuICAgIF9oeWRyYXRlQ3R4OiBoeWRyYXRlQ3R4LFxuICAgIF9ldmVudERlbGF5SW1wbDogaW5pdEV2ZW50RGVsYXkoKSxcbiAgICBfZW9tSW1wbDogaW5pdEVvbUltcGwoKSxcbiAgfTtcblxuICBpZiAoaXNSdW5PbkJhY2tncm91bmRFbmFibGVkKCkpIHtcbiAgICBnbG9iYWxUaGlzLmx5bnhXb3JrbGV0SW1wbC5fanNGdW5jdGlvbkxpZmVjeWNsZU1hbmFnZXIgPSBuZXcgSnNGdW5jdGlvbkxpZmVjeWNsZU1hbmFnZXIoKTtcbiAgfVxuXG4gIGdsb2JhbFRoaXMucmVnaXN0ZXJXb3JrbGV0ID0gcmVnaXN0ZXJXb3JrbGV0O1xuICBnbG9iYWxUaGlzLnJlZ2lzdGVyV29ya2xldEludGVybmFsID0gcmVnaXN0ZXJXb3JrbGV0O1xuICBnbG9iYWxUaGlzLnJ1bldvcmtsZXQgPSBydW5Xb3JrbGV0O1xufVxuXG4vKipcbiAqIFJlZ2lzdGVyIGEgd29ya2xldCBmdW5jdGlvbiwgYWxsb3dpbmcgaXQgdG8gYmUgZXhlY3V0ZWQgYnkgYHJ1bldvcmtsZXQoKWAuXG4gKiBUaGlzIGlzIGNhbGxlZCBpbiBsZXB1cy5qcy5cbiAqIEBwYXJhbSBfdHlwZSB3b3JrbGV0IHR5cGUsICdtYWluLXRocmVhZCcgb3IgJ3VpJ1xuICogQHBhcmFtIGlkIHdvcmtsZXQgaGFzaFxuICogQHBhcmFtIHdvcmtsZXQgd29ya2xldCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiByZWdpc3RlcldvcmtsZXQoX3R5cGU6IHN0cmluZywgaWQ6IHN0cmluZywgd29ya2xldDogKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdW5rbm93bik6IHZvaWQge1xuICBseW54V29ya2xldEltcGwuX3dvcmtsZXRNYXBbaWRdID0gd29ya2xldDtcbn1cblxuLyoqXG4gKiBFbnRyYW5jZSBvZiBhbGwgd29ya2xldCBjYWxscy5cbiAqIE5hdGl2ZSBldmVudCB0b3VjaCBoYW5kbGVyIHdpbGwgY2FsbCB0aGlzIGZ1bmN0aW9uLlxuICogQHBhcmFtIGN0eCB3b3JrbGV0IG9iamVjdC5cbiAqIEBwYXJhbSBwYXJhbXMgd29ya2xldCBwYXJhbXMuXG4gKi9cbmZ1bmN0aW9uIHJ1bldvcmtsZXQoY3R4OiBXb3JrbGV0LCBwYXJhbXM6IENsb3N1cmVWYWx1ZVR5cGVbXSk6IHVua25vd24ge1xuICBpZiAoIXZhbGlkYXRlV29ya2xldChjdHgpKSB7XG4gICAgY29uc29sZS53YXJuKCdXb3JrbGV0OiBJbnZhbGlkIHdvcmtsZXQgb2JqZWN0OiAnICsgSlNPTi5zdHJpbmdpZnkoY3R4KSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICgnX2xlcHVzV29ya2xldEhhc2gnIGluIGN0eCkge1xuICAgIGRlbGF5RXhlY1VudGlsSnNSZWFkeShjdHguX2xlcHVzV29ya2xldEhhc2gsIHBhcmFtcyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJldHVybiBydW5Xb3JrbGV0SW1wbChjdHgsIHBhcmFtcyk7XG59XG5cbmZ1bmN0aW9uIHJ1bldvcmtsZXRJbXBsKGN0eDogV29ya2xldCwgcGFyYW1zOiBDbG9zdXJlVmFsdWVUeXBlW10pOiB1bmtub3duIHtcbiAgY29uc3Qgd29ya2xldDogKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdW5rbm93biA9IHByb2ZpbGUoXG4gICAgJ3RyYW5zZm9ybVdvcmtsZXRDdHggJyArIGN0eC5fd2tsdElkLFxuICAgICgpID0+IHRyYW5zZm9ybVdvcmtsZXQoY3R4LCB0cnVlKSxcbiAgKTtcbiAgY29uc3QgcGFyYW1zXzogQ2xvc3VyZVZhbHVlVHlwZVtdID0gcHJvZmlsZShcbiAgICAndHJhbnNmb3JtV29ya2xldFBhcmFtcycsXG4gICAgKCkgPT4gdHJhbnNmb3JtV29ya2xldChwYXJhbXMgfHwgW10sIGZhbHNlKSxcbiAgKTtcbiAgcmV0dXJuIHByb2ZpbGUoJ3J1bldvcmtsZXQnLCAoKSA9PiB3b3JrbGV0KC4uLnBhcmFtc18pKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVXb3JrbGV0KGN0eDogdW5rbm93bik6IGN0eCBpcyBXb3JrbGV0IHtcbiAgcmV0dXJuIHR5cGVvZiBjdHggPT09ICdvYmplY3QnICYmIGN0eCAhPT0gbnVsbCAmJiAoJ193a2x0SWQnIGluIGN0eCB8fCAnX2xlcHVzV29ya2xldEhhc2gnIGluIGN0eCk7XG59XG5cbmNvbnN0IHdvcmtsZXRDYWNoZSA9IG5ldyBXZWFrTWFwPG9iamVjdCwgQ2xvc3VyZVZhbHVlVHlwZSB8ICgoLi4uYXJnczogdW5rbm93bltdKSA9PiB1bmtub3duKT4oKTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtV29ya2xldChjdHg6IFdvcmtsZXQsIGlzV29ya2xldDogdHJ1ZSk6ICguLi5hcmdzOiB1bmtub3duW10pID0+IHVua25vd247XG5mdW5jdGlvbiB0cmFuc2Zvcm1Xb3JrbGV0KFxuICBjdHg6IENsb3N1cmVWYWx1ZVR5cGVbXSxcbiAgaXNXb3JrbGV0OiBmYWxzZSxcbik6IENsb3N1cmVWYWx1ZVR5cGVbXTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtV29ya2xldChcbiAgY3R4OiBDbG9zdXJlVmFsdWVUeXBlLFxuICBpc1dvcmtsZXQ6IGJvb2xlYW4sXG4pOiBDbG9zdXJlVmFsdWVUeXBlIHwgKCguLi5hcmdzOiB1bmtub3duW10pID0+IHVua25vd24pIHtcbiAgLyogdjggaWdub3JlIG5leHQgMyAqL1xuICBpZiAodHlwZW9mIGN0eCAhPT0gJ29iamVjdCcgfHwgY3R4ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGN0eDtcbiAgfVxuXG4gIGlmIChpc1dvcmtsZXQpIHtcbiAgICBjb25zdCByZXMgPSB3b3JrbGV0Q2FjaGUuZ2V0KGN0eCk7XG4gICAgaWYgKHJlcykge1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gIH1cblxuICBjb25zdCB3b3JrbGV0ID0geyBtYWluOiBjdHggfTtcbiAgdHJhbnNmb3JtV29ya2xldElubmVyKHdvcmtsZXQsIDAsIGN0eCk7XG5cbiAgaWYgKGlzV29ya2xldCkge1xuICAgIHdvcmtsZXRDYWNoZS5zZXQoY3R4LCB3b3JrbGV0Lm1haW4pO1xuICB9XG4gIHJldHVybiB3b3JrbGV0Lm1haW47XG59XG5cbmNvbnN0IHRyYW5zZm9ybVdvcmtsZXRJbm5lciA9IChcbiAgdmFsdWU6IENsb3N1cmVWYWx1ZVR5cGUsXG4gIGRlcHRoOiBudW1iZXIsXG4gIGN0eDogdW5rbm93bixcbikgPT4ge1xuICBjb25zdCBsaW1pdCA9IDEwMDA7XG4gIGlmICgrK2RlcHRoID49IGxpbWl0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdEZXB0aCBvZiB2YWx1ZSBleGNlZWRzIGxpbWl0IG9mICcgKyBsaW1pdCArICcuJyk7XG4gIH1cbiAgLyogdjggaWdub3JlIG5leHQgMyAqL1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvYmogPSB2YWx1ZSBhcyBSZWNvcmQ8c3RyaW5nLCBDbG9zdXJlVmFsdWVUeXBlPjtcblxuICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICBjb25zdCBzdWJPYmo6IENsb3N1cmVWYWx1ZVR5cGUgPSBvYmpba2V5XTtcbiAgICBpZiAodHlwZW9mIHN1Yk9iaiAhPT0gJ29iamVjdCcgfHwgc3ViT2JqID09PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoLyoqIGlzRXZlbnRUYXJnZXQgKi8gJ2VsZW1lbnRSZWZwdHInIGluIHN1Yk9iaikge1xuICAgICAgb2JqW2tleV0gPSBuZXcgRWxlbWVudChzdWJPYmpbJ2VsZW1lbnRSZWZwdHInXSBhcyBFbGVtZW50Tm9kZSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKHN1Yk9iaiBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHRyYW5zZm9ybVdvcmtsZXRJbm5lcihzdWJPYmosIGRlcHRoLCBjdHgpO1xuXG4gICAgY29uc3QgaXNXb3JrbGV0UmVmID0gJ193dmlkJyBpbiAoc3ViT2JqIGFzIG9iamVjdCk7XG4gICAgaWYgKGlzV29ya2xldFJlZikge1xuICAgICAgb2JqW2tleV0gPSBnZXRGcm9tV29ya2xldFJlZk1hcChcbiAgICAgICAgc3ViT2JqIGFzIHVua25vd24gYXMgV29ya2xldFJlZkltcGw8dW5rbm93bj4sXG4gICAgICApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGlzV29ya2xldCA9ICdfd2tsdElkJyBpbiBzdWJPYmo7XG4gICAgaWYgKGlzV29ya2xldCkge1xuICAgICAgLy8gYHN1Yk9iamAgaXMgd29ya2xldCBjdHguIFNoYWxsb3cgY29weSBpdCB0byBwcmV2ZW50IHRoZSB0cmFuc2Zvcm1lZCB3b3JrbGV0IGZyb20gcmVmZXJlbmNpbmcgY3R4LlxuICAgICAgLy8gVGhpcyB3b3VsZCByZXN1bHQgaW4gdGhlIHZhbHVlIG9mIGB3b3JrbGV0Q2FjaGVgIHJlZmVyZW5jaW5nIGl0cyBrZXkuXG4gICAgICBvYmpba2V5XSA9IGx5bnhXb3JrbGV0SW1wbC5fd29ya2xldE1hcFsoc3ViT2JqIGFzIFdvcmtsZXQpLl93a2x0SWRdIVxuICAgICAgICAuYmluZCh7IC4uLnN1Yk9iaiB9KTtcbiAgICAgIG9ialtrZXldLmN0eCA9IHN1Yk9iajtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBpc0pzRm4gPSAnX2pzRm5JZCcgaW4gc3ViT2JqO1xuICAgIGlmIChpc0pzRm4pIHtcbiAgICAgIHN1Yk9ialsnX2V4ZWNJZCddID0gKGN0eCBhcyBXb3JrbGV0KS5fZXhlY0lkO1xuICAgICAgbHlueFdvcmtsZXRJbXBsLl9qc0Z1bmN0aW9uTGlmZWN5Y2xlTWFuYWdlcj8uYWRkUmVmKFxuICAgICAgICAoY3R4IGFzIFdvcmtsZXQpLl9leGVjSWQhLFxuICAgICAgICBzdWJPYmosXG4gICAgICApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgeyBpbml0V29ya2xldCB9O1xuIiwiLy8gQ29weXJpZ2h0IDIwMjQgVGhlIEx5bnggQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSBWZXJzaW9uIDIuMCB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbmltcG9ydCB7IGluaXRBcGlFbnYgfSBmcm9tICcuL2FwaS9seW54QXBpLmpzJztcbmltcG9ydCB7IGluaXRFdmVudExpc3RlbmVycyB9IGZyb20gJy4vbGlzdGVuZXJzLmpzJztcbmltcG9ydCB7IGluaXRXb3JrbGV0IH0gZnJvbSAnLi93b3JrbGV0UnVudGltZS5qcyc7XG5cbmlmIChnbG9iYWxUaGlzLmx5bnhXb3JrbGV0SW1wbCA9PT0gdW5kZWZpbmVkKSB7XG4gIGluaXRXb3JrbGV0KCk7XG4gIGluaXRBcGlFbnYoKTtcbiAgaW5pdEV2ZW50TGlzdGVuZXJzKCk7XG59XG4iXSwibmFtZXMiOlsiQW5pbWF0aW9uIiwiX19FbGVtZW50QW5pbWF0ZSIsImVmZmVjdCIsIktleWZyYW1lRWZmZWN0IiwidGFyZ2V0Iiwia2V5ZnJhbWVzIiwib3B0aW9ucyIsIndpbGxGbHVzaCIsInNob3VsZEZsdXNoIiwic2V0U2hvdWxkRmx1c2giLCJ2YWx1ZSIsIkVsZW1lbnQiLCJuYW1lIiwiX19TZXRBdHRyaWJ1dGUiLCJfX0FkZElubGluZVN0eWxlIiwic3R5bGVzIiwia2V5IiwiYXR0cmlidXRlTmFtZSIsIl9fR2V0QXR0cmlidXRlQnlOYW1lIiwiX19HZXRBdHRyaWJ1dGVOYW1lcyIsInNlbGVjdG9yIiwicmVmIiwiX19RdWVyeVNlbGVjdG9yIiwiX19RdWVyeVNlbGVjdG9yQWxsIiwiZWxlbWVudCIsIm5vcm1hbGl6ZWRPcHRpb25zIiwibWV0aG9kTmFtZSIsInBhcmFtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiX19JbnZva2VVSU1ldGhvZCIsInJlcyIsIkVycm9yIiwiSlNPTiIsIl9fRmx1c2hFbGVtZW50VHJlZSIsIk9iamVjdCIsIlBhZ2VFbGVtZW50IiwiX1BhZ2VFbGVtZW50IiwiX19HZXRQYWdlRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjc3NTZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpc1Nka1ZlcnNpb25HdCIsIm1ham9yIiwibWlub3IiLCJfU3lzdGVtSW5mb19seW54U2RrVmVyc2lvbiIsImx5bnhTZGtWZXJzaW9uIiwidmVyc2lvbiIsIk51bWJlciIsImluaXRBcGlFbnYiLCJseW54IiwiZ2xvYmFsVGhpcyIsIl9seW54X2NsZWFySW50ZXJ2YWwiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYWxsYmFjayIsInByb2ZpbGUiLCJzbGljZU5hbWUiLCJmIiwiY29uc29sZSIsImltcGwiLCJpbml0V29ya2xldFJlZiIsInVwZGF0ZVdvcmtsZXRSZWYiLCJ1cGRhdGVXb3JrbGV0UmVmSW5pdFZhbHVlQ2hhbmdlcyIsImNsZWFyRmlyc3RTY3JlZW5Xb3JrbGV0UmVmTWFwIiwiY3JlYXRlV29ya2xldFJlZiIsImlkIiwiZ2V0RnJvbVdvcmtsZXRSZWZNYXAiLCJyZWZJbXBsIiwidW5kZWZpbmVkIiwicmVtb3ZlVmFsdWVGcm9tV29ya2xldFJlZk1hcCIsImhhbmRsZSIsInBhdGNoIiwiaW5pdEV2ZW50TGlzdGVuZXJzIiwianNDb250ZXh0IiwiV29ya2xldEV2ZW50cyIsImV2ZW50IiwiZGF0YSIsInJldHVyblZhbHVlIiwicnVuV29ya2xldCIsImluaXRSdW5PbkJhY2tncm91bmREZWxheSIsImRlbGF5UnVuT25CYWNrZ3JvdW5kIiwicnVuRGVsYXllZEJhY2tncm91bmRGdW5jdGlvbnMiLCJmbk9iaiIsInRhc2siLCJfZm5PYmoiLCJkZWxheUluZGljZXMiLCJkZXRhaWxzIiwiaW5pdEV2ZW50RGVsYXkiLCJNYXAiLCJydW5EZWxheWVkV29ya2xldCIsImNsZWFyRGVsYXllZFdvcmtsZXRzIiwiZGVsYXlFeGVjVW50aWxKc1JlYWR5IiwiaGFzaCIsIm1hcCIsInBhcmFtVmVjIiwid29ya2xldCIsInBhcmFtc1ZlYyIsImxlZnRQYXJhbXNWZWMiLCJfZmlyc3RQYXJhbV9jdXJyZW50VGFyZ2V0IiwiZmlyc3RQYXJhbSIsInNldFRpbWVvdXQiLCJpbml0RW9tSW1wbCIsImh5ZHJhdGVDdHgiLCJjdHgiLCJmaXJzdFNjcmVlbkN0eCIsImh5ZHJhdGVDdHhJbXBsIiwiZXhlY0lkIiwiY3R4T2JqIiwiZmlyc3RTY3JlZW5DdHhPYmoiLCJoeWRyYXRlTWFpblRocmVhZFJlZiIsImh5ZHJhdGVEZWxheVJ1bk9uQmFja2dyb3VuZFRhc2tzIiwiZmlyc3RTY3JlZW5WYWx1ZSIsInJlZklkIiwibHlueFdvcmtsZXRJbXBsIiwiZm5PYmpzIiwiZmlyc3RTY3JlZW5Gbk9ianMiLCJmbk5hbWUiLCJmaXJzdFNjcmVlbkZuT2JqIiwiaW5kZXgiLCJKc0Z1bmN0aW9uTGlmZWN5Y2xlTWFuYWdlciIsIm9ialRvUmVmIiwiX3RoaXNfZXhlY0lkUmVmQ291bnRfZ2V0IiwicmMiLCJBcnJheSIsIlNldCIsIkZpbmFsaXphdGlvblJlZ2lzdHJ5IiwiaXNSdW5PbkJhY2tncm91bmRFbmFibGVkIiwiaW5pdFdvcmtsZXQiLCJyZWdpc3RlcldvcmtsZXQiLCJfdHlwZSIsInZhbGlkYXRlV29ya2xldCIsInJ1bldvcmtsZXRJbXBsIiwidHJhbnNmb3JtV29ya2xldCIsInBhcmFtc18iLCJ3b3JrbGV0Q2FjaGUiLCJXZWFrTWFwIiwiaXNXb3JrbGV0IiwidHJhbnNmb3JtV29ya2xldElubmVyIiwiZGVwdGgiLCJsaW1pdCIsIm9iaiIsInN1Yk9iaiIsImlzV29ya2xldFJlZiIsImlzSnNGbiIsIl9seW54V29ya2xldEltcGxfX2pzRnVuY3Rpb25MaWZlY3ljbGVNYW5hZ2VyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFZTyxNQUFNQTtRQVdKLFNBQWU7WUFFcEIsT0FBT0MsaUJBQWlCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRTs7Z0JBQTRCLElBQUksQ0FBQyxFQUFFO2FBQUM7UUFDMUY7UUFFTyxRQUFjO1lBRW5CLE9BQU9BLGlCQUFpQixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUU7O2dCQUEyQixJQUFJLENBQUMsRUFBRTthQUFDO1FBQ3pGO1FBRU8sT0FBYTtZQUVsQixPQUFPQSxpQkFBaUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FB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