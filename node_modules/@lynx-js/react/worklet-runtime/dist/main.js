(()=>{"use strict";let e,t,n;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l{cancel(){return __ElementAnimate(this.effect.target.element,[3,this.id])}pause(){return __ElementAnimate(this.effect.target.element,[2,this.id])}play(){return __ElementAnimate(this.effect.target.element,[1,this.id])}start(){return __ElementAnimate(this.effect.target.element,[0,this.id,this.effect.keyframes,this.effect.options])}constructor(e){r(this,"effect",void 0),r(this,"id",void 0),this.effect=e,this.id="__lynx-inner-js-animation-"+l.count++,this.start()}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r(l,"count",0);class o{constructor(e,t,n){i(this,"target",void 0),i(this,"keyframes",void 0),i(this,"options",void 0),this.target=e,this.keyframes=t,this.options=n}}let a=!1,s=!0;class u{setAttribute(e,t){__SetAttribute(this.element,e,t),this.flushElementTree()}setStyleProperty(e,t){__AddInlineStyle(this.element,e,t),this.flushElementTree()}setStyleProperties(e){for(let t in e)__AddInlineStyle(this.element,t,e[t]);this.flushElementTree()}getAttribute(e){return __GetAttributeByName(this.element,e)}getAttributeNames(){return __GetAttributeNames(this.element)}querySelector(e){let t=__QuerySelector(this.element,e,{});return t?new u(t):null}querySelectorAll(e){return __QuerySelectorAll(this.element,e,{}).map(e=>new u(e))}animate(e,t){return new l(new o(this,e,"number"==typeof t?{duration:t}:null!=t?t:{}))}invoke(e,t){return new Promise((n,r)=>{__InvokeUIMethod(this.element,e,null!=t?t:{},e=>{0===e.code?n(e.data):r(Error("UI method invoke: "+JSON.stringify(e)))}),this.flushElementTree()})}flushElementTree(){!a&&s&&(a=!0,Promise.resolve().then(()=>{a=!1,__FlushElementTree()}))}constructor(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"element",void 0),Object.defineProperty(this,"element",{get:()=>e})}}class c{static get(){return null!=c.pageElement||(c.pageElement=__GetPageElement()),c.pageElement}}function d(e){let t=__QuerySelector(c.get(),e,{});return t?new u(t):null}function f(e){return __QuerySelectorAll(c.get(),e,{}).map(e=>new u(e))}function m(e,t){var n;let r=(null!=(n=SystemInfo.lynxSdkVersion)?n:"1.0").split(".");return Number(r[0])>e||Number(r[0])==e&&Number(r[1])>t}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(c,"pageElement",void 0);let y=(e,t)=>({current:t,_wvid:e}),h=t=>{let n,r=t._wvid;return r<0?(n=e._firstScreenWorkletRefMap[r])||(n=e._firstScreenWorkletRefMap[r]=y(r,t._initValue)):n=e._workletRefMap[r],n};function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n){lynxWorkletImpl._workletMap[t]=n}let k=new WeakMap;function g(e,t){if("object"!=typeof e||null===e)return e;if(t){let t=k.get(e);if(t)return t}let n={main:e};return I(n,0,e),t&&k.set(e,n.main),n.main}let I=(e,t,n)=>{if(++t>=1e3)throw Error("Depth of value exceeds limit of 1000.");if("object"==typeof e&&null!==e)for(let l in e){let i=e[l];if("object"==typeof i&&null!==i){if("elementRefptr"in i){e[l]=new u(i.elementRefptr);continue}if(!(i instanceof u)){if(I(i,t,n),"_wvid"in i){e[l]=h(i);continue}if("_wkltId"in i){e[l]=lynxWorkletImpl._workletMap[i._wkltId].bind({...i}),e[l].ctx=i;continue}if("_jsFnId"in i){var r;i._execId=n._execId,null==(r=lynxWorkletImpl._jsFunctionLifecycleManager)||r.addRef(n._execId,i);continue}}}}};void 0===globalThis.lynxWorkletImpl&&(globalThis.lynxWorkletImpl={_workletMap:{},_refImpl:e={_workletRefMap:{},_firstScreenWorkletRefMap:{},updateWorkletRef:function(e,t){h(e).current=t?new u(t):null},updateWorkletRefInitValueChanges:function(t){t.forEach(([t,n])=>{e._workletRefMap[t]||(e._workletRefMap[t]=y(t,n))})},clearFirstScreenWorkletRefMap:function(){e._firstScreenWorkletRefMap={}}},_runOnBackgroundDelayImpl:t={delayedBackgroundFunctionArray:[],delayRunOnBackground:function(e,n){var r;t.delayedBackgroundFunctionArray.push({task:n}),(null!=(r=e._delayIndices)?r:e._delayIndices=[]).push(t.delayedBackgroundFunctionArray.length-1)},runDelayedBackgroundFunctions:function(){for(let e of t.delayedBackgroundFunctionArray)e.jsFnHandle&&e.task(e.jsFnHandle._jsFnId,e.jsFnHandle._execId);t.delayedBackgroundFunctionArray.length=0}},_hydrateCtx:function(e,t){(function e(t,n,r){if(t&&"object"==typeof t&&n&&"object"==typeof n&&(!t._wkltId||t._wkltId===n._wkltId))for(let o in t)if("_wvid"===o){var l,i;l=t[o],"_initValue"in(i=n)||(lynxWorkletImpl._refImpl._workletRefMap[l].current=i.current)}else if("_jsFn"===o)!function(e,t,n){for(let r in e){let l=e[r],i=t[r];if(null==i?void 0:i._delayIndices)for(let e of i._delayIndices){let t=lynxWorkletImpl._runOnBackgroundDelayImpl.delayedBackgroundFunctionArray[e];l._execId=n,t.jsFnHandle=l}}}(t[o],n[o],r);else{let l="function"==typeof n[o]?n[o].ctx:n[o];e(t[o],l,r)}})(e,t,e._execId)},_eventDelayImpl:n={_delayedWorkletParamsMap:new Map,runDelayedWorklet:function(e,t){(()=>{let r=n._delayedWorkletParamsMap.get(e._wkltId);if(void 0===r)return;let l=[];r.forEach(n=>{var r;let i=n[0];(null==i||null==(r=i.currentTarget)?void 0:r.elementRefptr)===t?setTimeout(()=>{runWorklet(e,n)},0):l.push(n)}),n._delayedWorkletParamsMap.set(e._wkltId,l)})()},clearDelayedWorklets:function(){n._delayedWorkletParamsMap.clear()}},_eomImpl:{setShouldFlush:function(e){s=e}}},m(2,15)&&(globalThis.lynxWorkletImpl._jsFunctionLifecycleManager=new class e{addRef(e,t){var n;this.execIdRefCount.set(e,(null!=(n=this.execIdRefCount.get(e))?n:0)+1),this.registry.register(t,e)}removeRef(e){let t=this.execIdRefCount.get(e);if(t>1)return void this.execIdRefCount.set(e,t-1);this.execIdRefCount.delete(e),this.execIdSetToFire.add(e),this.willFire||(this.willFire=!0,Promise.resolve().then(()=>{this.fire()}))}fire(){lynx.getJSContext().dispatchEvent({type:"Lynx.Worklet.releaseBackgroundWorkletCtx",data:Array.from(this.execIdSetToFire)}),this.execIdSetToFire.clear(),this.willFire=!1}constructor(){_(this,"execIdRefCount",new Map),_(this,"execIdSetToFire",new Set),_(this,"willFire",!1),_(this,"registry",void 0),this.registry=new FinalizationRegistry(this.removeRef.bind(this))}}),globalThis.registerWorklet=p,globalThis.registerWorkletInternal=p,globalThis.runWorklet=function(e,t){var r,l;if(!("object"==typeof(r=e)&&null!==r&&("_wkltId"in r||"_lepusWorkletHash"in r)))return void console.warn("Worklet: Invalid worklet object: "+JSON.stringify(e));if("_lepusWorkletHash"in e){return void(l=e._lepusWorkletHash,(()=>{let e=n._delayedWorkletParamsMap,r=e.get(l);r?r.push(t):e.set(l,[t])})())}return function(e,t){let n=(e._wkltId,g(e,!0)),r=g(t||[],!1);return n(...r)}(e,t)},function(){var e;lynx.querySelector=d,lynx.querySelectorAll=f,globalThis.setTimeout=lynx.setTimeout,globalThis.setInterval=lynx.setInterval,globalThis.clearTimeout=lynx.clearTimeout,globalThis.clearInterval=null!=(e=lynx.clearInterval)?e:lynx.clearTimeInterval;{let e=lynx.requestAnimationFrame;lynx.requestAnimationFrame=globalThis.requestAnimationFrame=t=>{if(!m(2,15))throw Error("requestAnimationFrame in main thread script requires Lynx sdk version 2.16");return e(t)}}globalThis.cancelAnimationFrame=lynx.cancelAnimationFrame}(),function(){let t=lynx.getJSContext();t.addEventListener("Lynx.Worklet.runWorkletCtx",e=>{let n=JSON.parse(e.data),r=runWorklet(n.worklet,n.params);t.dispatchEvent({type:"Lynx.Worklet.FunctionCallRet",data:JSON.stringify({resolveId:n.resolveId,returnValue:r})})}),t.addEventListener("Lynx.Worklet.releaseWorkletRef",t=>{var n;n=t.data.id,delete e._workletRefMap[n]})}())})();