import { AppCtx } from "./react-bindings";
import { useContext } from "preact/hooks";
/**
 * The Collapser deals with hiding sections in a tree view
 */
export function createCollapser(collapsed) {
    const collapseNode = (id, shouldCollapse) => {
        const v = collapsed.value;
        shouldCollapse ? v.add(id) : v.delete(id);
        collapsed.value = new Set(v);
    };
    const toggle = (id) => collapseNode(id, !collapsed.value.has(id));
    return {
        collapsed,
        collapseNode,
        toggle,
    };
}
export function useCollapser() {
    const c = useContext(AppCtx).collapser;
    const collapsed = c.collapsed.value;
    return { collapsed, collapseNode: c.collapseNode, toggle: c.toggle };
}
