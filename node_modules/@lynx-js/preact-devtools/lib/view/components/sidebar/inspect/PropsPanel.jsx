import { h, Fragment } from "preact";
import { ElementProps } from "./ElementProps";
import { SidebarPanel, Empty } from "../SidebarPanel";
import { NewProp } from "./NewProp";
import { useStore } from "../../../store/react-bindings";
import { Message } from "../../Message/Message";
export function PropsPanel(props) {
    const { label, onCopy, onChange, canAddNew } = props;
    const uncollapsed = props.uncollapsed.value;
    const items = props.items.value;
    const store = useStore();
    const isSupported = store.supports.hooks.value;
    return (<SidebarPanel title={label} onCopy={onCopy} testId={label}>
			{items.length ? (<Fragment>
					<ElementProps uncollapsed={uncollapsed} items={items} onChange={onChange} onCollapse={id => {
                const idx = props.uncollapsed.value.indexOf(id);
                const v = props.uncollapsed.value;
                idx > -1 ? v.splice(idx, 1) : v.push(id);
                props.uncollapsed.value = v.slice();
            }}/>
					{canAddNew && (<NewProp onChange={(v, path) => onChange(v, path, null)}/>)}
				</Fragment>) : !isSupported && label === "Hooks" ? (<Message type="warning" testId="no-hooks-support-warning">
					Please upgrade to Preact &gt;=10.4.1 to enable hooks inspection.
				</Message>) : (<Empty>None</Empty>)}
		</SidebarPanel>);
}
