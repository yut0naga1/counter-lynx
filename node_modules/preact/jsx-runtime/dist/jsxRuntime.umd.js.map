{"version":3,"file":"jsxRuntime.umd.js","sources":["../src/utils.js","../../src/constants.js","../src/index.js"],"sourcesContent":["const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n","/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + str + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities(value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n"],"names":["ENCODED_ENTITIES","encodeEntities","str","length","test","last","i","out","ch","charCodeAt","slice","IS_NON_DIMENSIONAL","vnodeId","isArray","Array","createVNode","type","props","key","isStaticChildren","__source","__self","normalizedProps","ref","vnode","__k","__","__b","__e","__d","undefined","__c","constructor","__v","__i","__u","defaultProps","options","jsxTemplate","templates","Fragment","tpl","exprs","call","arguments","JS_TO_CSS","CSS_REGEX","jsxAttr","name","value","attr","result","prop","val","replace","toLowerCase","suffix","startsWith","jsxEscape"],"mappings":"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"}