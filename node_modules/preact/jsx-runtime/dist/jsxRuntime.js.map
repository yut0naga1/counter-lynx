{"version":3,"file":"jsxRuntime.js","sources":["../src/utils.js","../../src/constants.js","../src/index.js"],"sourcesContent":["const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n","/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + str + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities(value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n"],"names":["ENCODED_ENTITIES","encodeEntities","str","length","test","last","i","out","ch","charCodeAt","slice","IS_NON_DIMENSIONAL","vnodeId","isArray","Array","createVNode","type","props","key","isStaticChildren","__source","__self","normalizedProps","ref","vnode","__k","__","__b","__e","__d","undefined","__c","constructor","__v","__i","__u","defaultProps","options","jsxTemplate","templates","Fragment","tpl","exprs","call","arguments","JS_TO_CSS","CSS_REGEX","jsxAttr","name","value","attr","result","prop","val","replace","toLowerCase","suffix","startsWith","jsxEscape"],"mappings":"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"}